<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <title>施設ケアプラン</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">
    
    <link rel="stylesheet" type="text/css" href="/css/theme.css">
    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/jquery-ui.css" />

    <script src="/js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="/js/jquery-ui.js"></script>
    <script src="/js/jquery.autosize.min.js"></script>
    <script src="/js/jquery.ui.datepicker-ja.js"></script>
    <script>
    window.onunload = function(){};
    history.forward();

    santeiriyud=[
         {"id":"1","value":"一人暮らし"},
         {"id":"2","value":"家族が障害、疾病等"},
         {"id":"3","value":"その他"},
     ];

    servicejigyoushod=[
//              ###KYOTAKUMASTER###
         {"id":"%1","jigyoushomei":"%2","jigyoushojusho":"%3"},
//              ###KYOTAKUMASTER###
     ];

	jigyousha=[
//           ###JIGYOUSHOMASTER###
		{"id":"%1","name":"%2","service":"%3"},
//           ###JIGYOUSHOMASTER###
		];

	kaigotyped=[
//           ###KAIGOTYPE###
		{"id":"%1","name":"%2"},
//           ###KAIGOTYPE###
		];

    hindod=[
        {"id":"0","value":"毎日"},
        {"id":"1","value":"随時"},
        {"id":"2","value":"必要時"},
        {"id":"3","value":"1回／週"},
        {"id":"4","value":"2回／週"},
        {"id":"5","value":"3回／週"},
        {"id":"6","value":"1回／月"},
        {"id":"7","value":"2回／月"},
        {"id":"8","value":"3回／月"},
        ];


     mokuhyoud=[
//            ###MOKUHYOU###
        {"id":"%1","kadai":"%2","chouki":"%3","choukistart":"%4","choukiend":"%5","tanki1":"%6","tankistart":"%7","tankiend":"%8","service1":"%9","hoken10":"%10",
"service1jigyousha1":"%11","service1jigyousha2":"%15","service1jigyousha3":"%17",
"service1jigyousha4":"%19","service1jigyousha5":"%21","service1hindo1":"%12","service1hindo2":"%16","service1hindo3":"%18","service1hindo4":"%20",
"service1hindo5":"%22","service1start":"%13","service1end":"%14","hoken11":"%83","hoken12":"%84",
"hoken13":"%85","hoken14":"%86","sort":"%103"},
//            ###MOKUHYOU###
        ];


	$(document).ready(function() {

		//施設リストプルダウンの「本社」を非表示
		var shisetsuList = $(".shisetsulist a").get();
		var shisetsuListLength = shisetsuList.length;
		for (var i=0; i<shisetsuList.length; i++) {
			var shisetsuListObj = $(shisetsuList).get(i);
			if ($(shisetsuListObj).text() == "本社") {
				$(shisetsuListObj).parent().css("display", "none");
				shisetsuListLength -= 1; 
			}
		}
		if (shisetsuListLength == 0) {
			$("#shisetsuList_ul").css("display", "none");
		}
		$.datepicker.setDefaults({
			changeYear:true,
			changeMonth:true,
			yearRange:"c-130:c+1",
			dateFormat: 'yy/mm/dd',
			yearSuffix: ''
        });
      function setServiceJigyoushoPulldown() {
         if(servicejigyoushod.length>0) {
            for(sg in servicejigyoushod) {
                 $('#slServiceJigyousha').append('<option value="'+servicejigyoushod[sg].id+'">'+servicejigyoushod[sg].jigyoushomei+'</option>');
            }
         }
      }

      setServiceJigyoushoPulldown();

      $('#slServiceJigyousha').live('change',function() {
          for(sj in servicejigyoushod) {
              if($('#slServiceJigyousha option:selected').val()==servicejigyoushod[sj].id) {
                  $('#fntJigyoushoJusho').text(servicejigyoushod[sj].jigyoushojusho);
                  break;
              } else {
                  $('#fntJigyoushoJusho').text("");
              }
          }
      });

//      var curdate = new Date(###KEIKAKUSAKUSEIDATE###);
//      var curyear = curdate.getFullYear();
//      var curmonth = curdate.getMonth()+1;
//      var curday = curdate.getDate();

//      var dispCurDate=convert_wareki(curyear,true)+"年"+curmonth+"月"+curday+"日";
//      $('#KeikakuSakuseiDate').val(dispCurDate);

      for(var s in santeiriyud) {
          $('#slSanteiRiyu').append('<option value="'+santeiriyud[s].id+'">'+santeiriyud[s].value+'</option>');
      }

      $('#slSanteiRiyu').live("change",function(){
          if($('#slSanteiRiyu').val()=="3") {
             $('#txtSanteiSonota').show("slow");
          } else {
             $('#txtSanteiSonota').hide("slow");
          }
      });


      $("#ShokaiSakusei").click(function(){
          if($("#ShokaiSakusei").val()=="1") {
              $("#ShoukaiSakusei").removeAttr("checked");
              $("#KeizokuSakusei").removeAttr("checked");
          }
      });
      $("#ShoukaiSakusei").click(function(){
          if($("#ShoukaiSakusei").val()=="1") {
              $("#ShokaiSakusei").removeAttr("checked");
          }
      });
      $("#KeizokuSakusei").click(function(){
          if($("#KeizokuSakusei").val()=="1") {
              $("#ShokaiSakusei").removeAttr("checked");
          }
      });

        $("#Hyouji").click(function(){
            $('#MODE').val("init");
            document.frmCareplan.target="popwindow";
            document.frmCareplan.action="POP_SENTAKU_CAREPLAN2.CGI"
            document.frmCareplan.method="POST"
            document.frmCareplan.submit();
        });

        $("#Hyoji").click(function(){
           $('*[name="Riyoushaid"]').val($('#riyosha_name').val());
           $('*[name="dispFloor"]').val($('#floor').val());
           $('*[name="dispUnit"]').val($('#unit').val());
           $('#hdKeikakuSakuseiDate').val($('#Rireki').val());
           $('#MODE').val("search");
           document.frmCareplan.target="_self";
           document.frmCareplan.submit();
        });

        $("#print").click(function(){
           $('#MODE').val("print");
           document.frmCareplan.target="printwindow";
           document.frmCareplan.submit();
        });


        $("#regist").click(function(){
            if(hidukeCheck()=="0") {
               $('*[name="Riyoushaid"]').val($('#riyosha_name').val());
               $('*[name="dispFloor"]').val($('#floor').val());
               $('*[name="dispUnit"]').val($('#unit').val());
               $('#MokuhyouVal').val(nummokuhyou);
               $('#MODE').val("regist");
               document.frmCareplan.target="_self";
               document.frmCareplan.submit();
            } else {
               alert('入力された日付に間違いがあるようです。');
            }
        });


      $('.textareaautosize').autosize({append: "\n"});

      function setHindoPulldown(num) {
         if(hindod.length>0) {
             for(var h in hindod) {
                 $('.lsServiceJigyoushaFirst0Hindo').eq(num).append('<option value="'+hindod[h].value+'">');
                 $('.lsServiceJigyoushaFirst1Hindo').eq(num).append('<option value="'+hindod[h].value+'">');
                 $('.lsServiceJigyoushaFirst2Hindo').eq(num).append('<option value="'+hindod[h].value+'">');
                 $('.lsServiceJigyoushaFirst3Hindo').eq(num).append('<option value="'+hindod[h].value+'">');
                 $('.lsServiceJigyoushaFirst4Hindo').eq(num).append('<option value="'+hindod[h].value+'">');
             }
         } 
      }

     function hidukeCheck() {
        var resflg="0";
        $(".ChoukiMokuhyouStart").each(function(idx){
            cms=$(".ChoukiMokuhyouStart").eq(idx).val();
            cme=$(".ChoukiMokuhyouEnd").eq(idx).val();
            tms=$(".TankiMokuhyouFirstStart").eq(idx).val();
            tme=$(".TankiMokuhyouFirstEnd").eq(idx).val();
            sjs=$(".ServiceJigyoushaFirst0Start").eq(idx).val();
            sje=$(".ServiceJigyoushaFirst0End").eq(idx).val();
            if(cms!=""&&cme!=""){
                if(cms > cme) {
                   resflg="1";
                }
            }
            if(tms!=""&&tme!=""){
                if(tms > tme) {
                   resflg="1";
                }
            }
            if(sjs!=""&&sje!=""){
                if(sjs > sje) {
                   resflg="1";
                }
            }
        });

        return resflg;
     }

     setHindoPulldown(0);

      function setKaigoTypePulldown(num) {
         if(kaigotyped.length>0) {
             for(var k in kaigotyped) {
                 $('.ServiceShubetsu0First').eq(num).append('<option value="'+kaigotyped[k].id+'">'+kaigotyped[k].name+'</option>');
                 $('.ServiceShubetsu1First').eq(num).append('<option value="'+kaigotyped[k].id+'">'+kaigotyped[k].name+'</option>');
                 $('.ServiceShubetsu2First').eq(num).append('<option value="'+kaigotyped[k].id+'">'+kaigotyped[k].name+'</option>');
                 $('.ServiceShubetsu3First').eq(num).append('<option value="'+kaigotyped[k].id+'">'+kaigotyped[k].name+'</option>');
                 $('.ServiceShubetsu4First').eq(num).append('<option value="'+kaigotyped[k].id+'">'+kaigotyped[k].name+'</option>');
             }
         } 
      }

      setKaigoTypePulldown(0);


      function setJigyoushaPulldown(num) {
         if(jigyousha.length>0) {
             for(var j in jigyousha) {
                 $('.Jigyousha0First').eq(num).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
                 $('.Jigyousha1First').eq(num).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
                 $('.Jigyousha2First').eq(num).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
                 $('.Jigyousha3First').eq(num).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
                 $('.Jigyousha4First').eq(num).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
             }
         } 
      }

      setJigyoushaPulldown(0);

      $('.ServiceShubetsu0First').live('change',function(){
          var jfindex=$('.ServiceShubetsu0First').index(this);
          $('.Jigyousha0First').eq(jfindex).children().remove();
          for(var j in jigyousha) {
              if($('.ServiceShubetsu0First').eq(jfindex).val()==jigyousha[j].service) {
                  $('.Jigyousha0First').eq(jfindex).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
              }
          }
      });
      $('.ServiceShubetsu1First').live('change',function(){
          var jfindex=$('.ServiceShubetsu1First').index(this);
          $('.Jigyousha1First').eq(jfindex).children().remove();
          for(var j in jigyousha) {
              if($('.ServiceShubetsu1First').eq(jfindex).val()==jigyousha[j].service) {
                  $('.Jigyousha1First').eq(jfindex).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
              }
          }
      });

      $('.ServiceShubetsu2First').live('change',function(){
          var jfindex=$('.ServiceShubetsu2First').index(this);
          $('.Jigyousha2First').eq(jfindex).children().remove();
          for(var j in jigyousha) {
              if($('.ServiceShubetsu2First').eq(jfindex).val()==jigyousha[j].service) {
                  $('.Jigyousha2First').eq(jfindex).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
              }
          }
      });

      $('.ServiceShubetsu3First').live('change',function(){
          var jfindex=$('.ServiceShubetsu3First').index(this);
          $('.Jigyousha3First').eq(jfindex).children().remove();
          for(var j in jigyousha) {
              if($('.ServiceShubetsu3First').eq(jfindex).val()==jigyousha[j].service) {
                  $('.Jigyousha3First').eq(jfindex).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
              }
          }
      });

      $('.ServiceShubetsu4First').live('change',function(){
          var jfindex=$('.ServiceShubetsu4First').index(this);
          $('.Jigyousha4First').eq(jfindex).children().remove();
          for(var j in jigyousha) {
              if($('.ServiceShubetsu4First').eq(jfindex).val()==jigyousha[j].service) {
                  $('.Jigyousha4First').eq(jfindex).append('<option value="'+jigyousha[j].id+'">'+jigyousha[j].name+'</option>');
              }
          }
      });

      var htmlmokuhyou="";
      var nummokuhyou=0;

      if(mokuhyoud.length>0) {
         for(var m in mokuhyoud) {
           setHTMLFormat();
           $('#MokuhyouID'+m).val(mokuhyoud[m].id);
           $('#MokuhyouPoint'+m).text(mokuhyoud[m].kadai);
           $('#MokuhyouSort'+m).val(mokuhyoud[m].sort);
           $('#ChoukiMokuhyou'+m).val(mokuhyoud[m].chouki);
           $('#ChoukiMokuhyouStart'+m).val(mokuhyoud[m].choukistart);
           $('#ChoukiMokuhyouEnd'+m).val(mokuhyoud[m].choukiend);
           $('#TankiMokuhyouFirst'+m).val(mokuhyoud[m].tanki1);
           $('#TankiMokuhyouFirstStart'+m).val(mokuhyoud[m].tankistart);
           $('#TankiMokuhyouFirstEnd'+m).val(mokuhyoud[m].tankiend);
           $('#ServiceNaiyouFirst'+m).val(mokuhyoud[m].service1);
           if(mokuhyoud[m].hoken10=="1") {
              $('#HokenKyufu0First'+m).attr('checked','checked');
           }
           if(mokuhyoud[m].hoken11=="1") {
              $('#HokenKyufu1First'+m).attr('checked','checked');
           }
           if(mokuhyoud[m].hoken12=="1") {
              $('#HokenKyufu2First'+m).attr('checked','checked');
           }
           if(mokuhyoud[m].hoken13=="1") {
              $('#HokenKyufu3First'+m).attr('checked','checked');
           }
           if(mokuhyoud[m].hoken14=="1") {
              $('#HokenKyufu4First'+m).attr('checked','checked');
           }
           $('#Jigyousha0First'+m).val(mokuhyoud[m].service1jigyousha1);
           $('#ServiceJigyoushaFirst0Hindo'+m).val(mokuhyoud[m].service1hindo1);
           $('#ServiceJigyoushaFirst0Start'+m).val(mokuhyoud[m].service1start);
           $('#ServiceJigyoushaFirst0End'+m).val(mokuhyoud[m].service1end);
           $('#Jigyousha1First'+m).val(mokuhyoud[m].service1jigyousha2);
           $('#ServiceJigyoushaFirst1Hindo'+m).val(mokuhyoud[m].service1hindo2);
           $('#Jigyousha2First'+m).val(mokuhyoud[m].service1jigyousha3);
           $('#ServiceJigyoushaFirst2Hindo'+m).val(mokuhyoud[m].service1hindo3);
           $('#Jigyousha3First'+m).val(mokuhyoud[m].service1jigyousha4);
           $('#ServiceJigyoushaFirst3Hindo'+m).val(mokuhyoud[m].service1hindo4);
           $('#Jigyousha4First'+m).val(mokuhyoud[m].service1jigyousha5);
           $('#ServiceJigyoushaFirst4Hindo'+m).val(mokuhyoud[m].service1hindo5);
           $('#TankiMokuhyouSecond'+m).val(mokuhyoud[m].tanki2);
           $('#ServiceNaiyouSecond'+m).val(mokuhyoud[m].service2);

           var jfindex=m;
           for(var j in jigyousha) {
              if($('.Jigyousha0First').eq(jfindex).val()==jigyousha[j].id) {
                  $('.ServiceShubetsu0First').eq(jfindex).val(jigyousha[j].service);
              }
              if($('.Jigyousha1First').eq(jfindex).val()==jigyousha[j].id) {
                  $('.ServiceShubetsu1First').eq(jfindex).val(jigyousha[j].service);
              }
              if($('.Jigyousha2First').eq(jfindex).val()==jigyousha[j].id) {
                  $('.ServiceShubetsu2First').eq(jfindex).val(jigyousha[j].service);
              }
              if($('.Jigyousha3First').eq(jfindex).val()==jigyousha[j].id) {
                  $('.ServiceShubetsu3First').eq(jfindex).val(jigyousha[j].service);
              }
              if($('.Jigyousha4First').eq(jfindex).val()==jigyousha[j].id) {
                  $('.ServiceShubetsu4First').eq(jfindex).val(jigyousha[j].service);
              }
           }
         }
      } else {
         setHTMLFormat();
      }

      $('#add').live('click',function(){
         setHTMLFormat();
      });


      function setHTMLFormat() {
          htmlmokuhyou="";
          htmlmokuhyou=htmlmokuhyou+'<tr>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center;vertical-align:top" rowspan="5">';
          htmlmokuhyou=htmlmokuhyou+'<input type="number" id="MokuhyouSort'+nummokuhyou+'" name="MokuhyouSort'+nummokuhyou+'" min="0" rows="5" style="width:100%">';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center;vertical-align:top" rowspan="5"><input type="hidden" id="MokuhyouID'+nummokuhyou+'" name="MokuhyouID'+nummokuhyou+'" value="" />';
          htmlmokuhyou=htmlmokuhyou+'<textarea id="MokuhyouPoint'+nummokuhyou+'" name="MokuhyouPoint'+nummokuhyou+'" rows="5" class="textareaautosize" style="width:100%;border:none" maxlength="250" placeholder="最大250文字"></textarea>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center;vertical-align:top" rowspan="5">';
          htmlmokuhyou=htmlmokuhyou+'<textarea id="ChoukiMokuhyou'+nummokuhyou+'" name="ChoukiMokuhyou'+nummokuhyou+'" rows="5" class="textareaautosize" style="width:100%;border:none" maxlength="250" placeholder="最大250文字"></textarea>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" rowspan="5">';
          htmlmokuhyou=htmlmokuhyou+'<input type="text" id="ChoukiMokuhyouStart'+nummokuhyou+'" name="ChoukiMokuhyouStart'+nummokuhyou+'" class="ChoukiMokuhyouStart" style="width:100px;background-color:lightyellow">';
          htmlmokuhyou=htmlmokuhyou+'～';
          htmlmokuhyou=htmlmokuhyou+'<input type="text" id="ChoukiMokuhyouEnd'+nummokuhyou+'" name="ChoukiMokuhyouEnd'+nummokuhyou+'" class="ChoukiMokuhyouEnd" style="width:100px;background-color:lightyellow">';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" rowspan="5">';
          htmlmokuhyou=htmlmokuhyou+'<textarea id="TankiMokuhyouFirst'+nummokuhyou+'" name="TankiMokuhyouFirst'+nummokuhyou+'" rows="5" class="textareaautosize" style="width:100%;border:none" maxlength="100" placeholder="最大100文字"></textarea>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" rowspan="5">';
          htmlmokuhyou=htmlmokuhyou+'<input type="text" id="TankiMokuhyouFirstStart'+nummokuhyou+'" name="TankiMokuhyouFirstStart'+nummokuhyou+'" class="TankiMokuhyouFirstStart" style="width:100px;background-color:lightyellow">';
          htmlmokuhyou=htmlmokuhyou+'～';
          htmlmokuhyou=htmlmokuhyou+'<input type="text" id="TankiMokuhyouFirstEnd'+nummokuhyou+'" name="TankiMokuhyouFirstEnd'+nummokuhyou+'" class="TankiMokuhyouFirstEnd" style="width:100px;background-color:lightyellow">';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" rowspan="5">';
          htmlmokuhyou=htmlmokuhyou+'<textarea id="ServiceNaiyouFirst'+nummokuhyou+'" name="ServiceNaiyouFirst'+nummokuhyou+'" rows="5" class="textareaautosize" style="width:100%;border:none" maxlength="150" placeholder="最大150文字"></textarea>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><input type="checkbox" id="HokenKyufu0First'+nummokuhyou+'" name="HokenKyufu0First'+nummokuhyou+'" class="HokenKyufu0First" value="1" ></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><select id="ServiceShubetsu0First'+nummokuhyou+'" name="ServiceShubetsu0First'+nummokuhyou+'" class="ServiceShubetsu0First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><select id="Jigyousha0First'+nummokuhyou+'" name="Jigyousha0First'+nummokuhyou+'" style="width:150px" class="Jigyousha0First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center">';
          htmlmokuhyou=htmlmokuhyou+'<input id="ServiceJigyoushaFirst0Hindo'+nummokuhyou+'" name="ServiceJigyoushaFirst0Hindo'+nummokuhyou+'" class="ServiceJigyoushaFirst0Hindo" list="lsServiceJigyoushaFirst0Hindo'+nummokuhyou+'"><datalist id="lsServiceJigyoushaFirst0Hindo'+nummokuhyou+'" class="lsServiceJigyoushaFirst0Hindo"></datalist>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" rowspan="5">';
          htmlmokuhyou=htmlmokuhyou+'<input type="text" id="ServiceJigyoushaFirst0Start'+nummokuhyou+'" name="ServiceJigyoushaFirst0Start'+nummokuhyou+'" class="ServiceJigyoushaFirst0Start" style="width:100px;background-color:lightyellow">';
          htmlmokuhyou=htmlmokuhyou+'～';
          htmlmokuhyou=htmlmokuhyou+'<input type="text" id="ServiceJigyoushaFirst0End'+nummokuhyou+'" name="ServiceJigyoushaFirst0End'+nummokuhyou+'" class="ServiceJigyoushaFirst0End" style="width:100px;background-color:lightyellow">';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'</tr>';
          htmlmokuhyou=htmlmokuhyou+'<tr>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><input type="checkbox" id="HokenKyufu1First'+nummokuhyou+'" name="HokenKyufu1First'+nummokuhyou+'" class="HokenKyufu1First" value="1" ></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" class=""><select id="ServiceShubetsu1First'+nummokuhyou+'" name="ServiceShubetsu1First'+nummokuhyou+'" class="ServiceShubetsu1First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><select id="Jigyousha1First'+nummokuhyou+'" name="Jigyousha1First'+nummokuhyou+'" style="width:150px" class="Jigyousha1First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center">';
          htmlmokuhyou=htmlmokuhyou+'<input id="ServiceJigyoushaFirst1Hindo'+nummokuhyou+'" name="ServiceJigyoushaFirst1Hindo'+nummokuhyou+'" class="ServiceJigyoushaFirst1Hindo" list="lsServiceJigyoushaFirst1Hindo'+nummokuhyou+'"><datalist id="lsServiceJigyoushaFirst1Hindo'+nummokuhyou+'" class="lsServiceJigyoushaFirst1Hindo"></datalist>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'</tr>';
          htmlmokuhyou=htmlmokuhyou+'<tr>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><input type="checkbox" id="HokenKyufu2First'+nummokuhyou+'" name="HokenKyufu2First'+nummokuhyou+'" class="HokenKyufu2First" value="1" ></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" class=""><select id="ServiceShubetsu2First'+nummokuhyou+'" name="ServiceShubetsu2First'+nummokuhyou+'" class="ServiceShubetsu2First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><select id="Jigyousha2First'+nummokuhyou+'" name="Jigyousha2First'+nummokuhyou+'" style="width:150px" class="Jigyousha2First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center">';
          htmlmokuhyou=htmlmokuhyou+'<input id="ServiceJigyoushaFirst2Hindo'+nummokuhyou+'" name="ServiceJigyoushaFirst2Hindo'+nummokuhyou+'" class="ServiceJigyoushaFirst2Hindo" list="lsServiceJigyoushaFirst2Hindo'+nummokuhyou+'"><datalist id="lsServiceJigyoushaFirst2Hindo'+nummokuhyou+'" class="lsServiceJigyoushaFirst2Hindo"></datalist>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'</tr>';
          htmlmokuhyou=htmlmokuhyou+'<tr>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><input type="checkbox" id="HokenKyufu3First'+nummokuhyou+'" name="HokenKyufu3First'+nummokuhyou+'" class="HokenKyufu3First" value="1" ></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" class=""><select id="ServiceShubetsu3First'+nummokuhyou+'" name="ServiceShubetsu3First'+nummokuhyou+'" class="ServiceShubetsu3First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><select id="Jigyousha3First'+nummokuhyou+'" name="Jigyousha3First'+nummokuhyou+'" style="width:150px" class="Jigyousha3First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center">';
          htmlmokuhyou=htmlmokuhyou+'<input id="ServiceJigyoushaFirst3Hindo'+nummokuhyou+'" name="ServiceJigyoushaFirst3Hindo'+nummokuhyou+'" class="ServiceJigyoushaFirst3Hindo" list="lsServiceJigyoushaFirst3Hindo'+nummokuhyou+'"><datalist id="lsServiceJigyoushaFirst3Hindo'+nummokuhyou+'" class="lsServiceJigyoushaFirst3Hindo"></datalist>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'</tr>';
          htmlmokuhyou=htmlmokuhyou+'<tr>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><input type="checkbox" id="HokenKyufu4First'+nummokuhyou+'" name="HokenKyufu4First'+nummokuhyou+'" class="HokenKyufu4First" value="1" ></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center" class=""><select id="ServiceShubetsu4First'+nummokuhyou+'" name="ServiceShubetsu4First'+nummokuhyou+'" class="ServiceShubetsu4First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center"><select id="Jigyousha4First'+nummokuhyou+'" name="Jigyousha4First'+nummokuhyou+'" style="width:150px" class="Jigyousha4First"><option value=""></option></select></td>';
          htmlmokuhyou=htmlmokuhyou+'<td style="padding:0px 0px 0px 0px;border:1px solid #bbbbbb;text-align:center">';
          htmlmokuhyou=htmlmokuhyou+'<input id="ServiceJigyoushaFirst4Hindo'+nummokuhyou+'" name="ServiceJigyoushaFirst4Hindo'+nummokuhyou+'" class="ServiceJigyoushaFirst4Hindo" list="lsServiceJigyoushaFirst4Hindo'+nummokuhyou+'"><datalist id="lsServiceJigyoushaFirst4Hindo'+nummokuhyou+'" class="lsServiceJigyoushaFirst4Hindo"></datalist>';
          htmlmokuhyou=htmlmokuhyou+'</td>';
          htmlmokuhyou=htmlmokuhyou+'</tr>';

          $('#MokuhyouIchiran').append(htmlmokuhyou);

          setKaigoTypePulldown(nummokuhyou);
          setJigyoushaPulldown(nummokuhyou);
          setHindoPulldown(nummokuhyou);
          setDateFormat(nummokuhyou);
          $('.textareaautosize').autosize();

          nummokuhyou++;

      }




	});



               function setDateFormat(num){
                        $(".ChoukiMokuhyouStart").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],false)+"/"+ArrDate[1]+"/"+ArrDate[2];
                                        $(".ChoukiMokuhyouStart").eq(num).val(DispDate);
                                }
                        });

                        $(".ChoukiMokuhyouEnd").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],false)+"/"+ArrDate[1]+"/"+ArrDate[2];
                                        $(".ChoukiMokuhyouEnd").eq(num).val(DispDate);
                                }
                        });
                        $(".TankiMokuhyouFirstStart").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],false)+"/"+ArrDate[1]+"/"+ArrDate[2];
                                        $(".TankiMokuhyouFirstStart").eq(num).val(DispDate);
                                }
                        });

                        $(".TankiMokuhyouFirstEnd").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],false)+"/"+ArrDate[1]+"/"+ArrDate[2];
                                        $(".TankiMokuhyouFirstEnd").eq(num).val(DispDate);
                                }
                        });
                        $(".ServiceJigyoushaFirst0Start").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],false)+"/"+ArrDate[1]+"/"+ArrDate[2];
                                        $(".ServiceJigyoushaFirst0Start").eq(num).val(DispDate);
                                }
                        });

                        $(".ServiceJigyoushaFirst0End").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],false)+"/"+ArrDate[1]+"/"+ArrDate[2];
                                        $(".ServiceJigyoushaFirst0End").eq(num).val(DispDate);
                                }
                        });
                }


		function convert_wareki(year, setting){
		    var result;
		    if(setting === false){
		        return year;
//                ###GENGOU###
		    } else if (year > %2) {
		        result = year - %2;
		        result = '%1' + result;
		        return result;
//                ###GENGOU###
		    }
		}

                $('.shisetsulist').live('mouseover',function(){
                   this.style.backgroundColor="lightgrey";
                });
                $('.shisetsulist').live('mouseout',function(){
                   this.style.backgroundColor="white";
                });

                $('#choukikikancpy').live('click',function(){
                   $('.ChoukiMokuhyouStart').val($('.ChoukiMokuhyouStart').eq(0).val());
                   $('.ChoukiMokuhyouEnd').val($('.ChoukiMokuhyouEnd').eq(0).val());
                });
                $('#tankikikancpy').live('click',function(){
                   $('.TankiMokuhyouFirstStart').val($('.TankiMokuhyouFirstStart').eq(0).val());
                   $('.TankiMokuhyouFirstEnd').val($('.TankiMokuhyouFirstEnd').eq(0).val());
                });
                $('#jigyoushakikancpy').live('click',function(){
                   $('.ServiceJigyoushaFirst0Start').val($('.ServiceJigyoushaFirst0Start').eq(0).val());
                   $('.ServiceJigyoushaFirst0End').val($('.ServiceJigyoushaFirst0End').eq(0).val());
                });

      function change_select_input(mode){
           var SHISETSU_CODE="###SHISETSUID###";
           var FLOOR_CODE = $("#floor").val();
           var UNIT_CODE = $("#unit").val();
           var RIYOSHA_CODE = $("#riyosha_name").val();
           $.post("/E-LIFE/CARE_KAIGOSAKUSEI/cgi-bin/CARE_SHISETSU_CAREPLAN.GET_RIYOSHA.CGI",
                 { "MODE": mode,
                   "shisetsu": SHISETSU_CODE,
                   "floor": FLOOR_CODE,
                   "unit": UNIT_CODE,
                   "riyosha_name": RIYOSHA_CODE },
           function(data,status){
                 $("#FLOOR_GET").html(data);
           },
           "html"
           );
      }

    </script>

    <!-- Demo page code -->

    <style type="text/css">
        #line-chart {
            height:300px;
            width:800px;
            margin: 0px auto;
            margin-top: 1em;
        }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="lib/html5.js"></script>
    <![endif]-->

  </head>

