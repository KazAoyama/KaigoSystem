<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <title>訪問介護計画書入力</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">
    
    <link rel="stylesheet" type="text/css" href="/css/theme.css">
    <link rel="stylesheet" href="/css/jquery-ui.css" />
    <link rel="stylesheet" href="/css/font.css">

    <script src="/js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="/js/jquery-ui.js"></script>
    <script src="/js/jquery.autosize.min.js"></script>
	<script src="/js/validateUtils.js"></script>
	<script src="/js/messageMaster.js"></script>
	<script src="/js/jquery.ui.datepicker-ja.js"></script>

	<script>


        // データセット部
        // サービス区分（サービスコード種類、サービスコード区分、サービス名、最小時間、最大時間、対象>介護度、対象事業規模、対象事業者種類、サ責、同一建物、朝夜、深夜、集計単位区分、単位）
        kaigoservice=[
//                     ###SERVICECODE###
                {"jigyoushatype":"%1","id":"%2","value":"%3","min":"%4","max":"%5","kaigodo":"%6","scale":"%7","facilitytype":"%8","servicemanager":"%9","douitsu":"%10","asayoru":"%11","shinya":"%12","unit":"%13","fee":"%14"},
//                     ###SERVICECODE###
                ];


//　サービス利用票テーブルより取得（検索条件は供給者ID、対象月
//  名前、サービスID、サービス値日付値、サービス開始時間、サービス終了時間
	sakuseid=[
//                     ###RIYOUHYOU###
	   		{ "kubun":"%1","yoteidate":"%2","start":"%3","end":"%4","id":"%5","youbi":"%6","helperfirst":"%7",
                          "helpersecond":"%8","helperthird":"%9","helperfourth":"%10","servicefirst":"%11","servicesecond":"%12",
                          "jikanfirst":"%13","jikansecond":"%14","ryuijiko":"%15","goukeijikan":"%16"},
//                     ###RIYOUHYOU###
		];

        choukid=[
//                     ###CHOUKI###
                        {"id":"%1","value":"%2","start":"%3","end":"%4"},
//                     ###CHOUKI###
                ];

        tankid=[
//                     ###TANKI###
                        {"id":"%1","value":"%2","start":"%3","end":"%4"},
//                     ###TANKI###
                ];

	helperd =	[
//                      ###HELPERLIST###
    		{ "id": "%1", "name":"%2"},
//                      ###HELPERLIST###
    	];

	helper_setumeid =	[
//                      ###HELPERLISTSETUMEISHA###
    		{ "id": "%1", "name":"%2"},
//                      ###HELPERLISTSETUMEISHA###
    	];

    jigyoushad = [
//                      ###KYOTAKUMASTER###
            {"id":"%1","value":"%2"},
//                      ###KYOTAKUMASTER###
        ];


//  利用者の情報
        var youkaigodo="###YOUKAIGODO###";
    
//  ユーザの所属事業所から取得する。
        // 施設パラメータセット
        var Douitsu="###DOUITSU_GENSAN###";
        var servicemanager="###SERVICEMANAGER_GENSAN###";
    // 事業所情報
        var JigyoushaType="###JIGYOUSHATYPE###";
        var JigyoushaScale="###SHISETSUKBN###";


	jQuery(function(){
		//施設リストプルダウンの「本社」を非表示
		var shisetsuList = $(".shisetsulist a").get();
		var shisetsuListLength = shisetsuList.length;
		for (var i=0; i<shisetsuList.length; i++) {
			var shisetsuListObj = $(shisetsuList).get(i);
			if ($(shisetsuListObj).text() == "本社") {
				$(shisetsuListObj).parent().css("display", "none");
				shisetsuListLength -= 1; 
			}
		}
		//施設リストプルダウンの中身が0個の場合、吹き出しを非表示
		if (shisetsuListLength == 0) {
			$("#shisetsuList_ul").css("display", "none");
		}
        $('#slKeikakuType').live('change',function(){
            if($('#slKeikakuType option:selected').val()=="1") {
                $('#fntYobou').show();
                $('#Kaigodo').val('0');
                $('#Kaigodo').children("[value='1']").removeAttr('disabled');
                $('#Kaigodo').children("[value='2']").removeAttr('disabled');
                $('#Kaigodo').children("[value='3']").attr("disabled","disabled");
                $('#Kaigodo').children("[value='4']").attr("disabled","disabled");
                $('#Kaigodo').children("[value='5']").attr("disabled","disabled");
                $('#Kaigodo').children("[value='6']").attr("disabled","disabled");
                $('#Kaigodo').children("[value='7']").attr("disabled","disabled");
            } else if($('#slKeikakuType option:selected').val()=="0") {
                $('#fntYobou').hide();
                $('#Kaigodo').val('0');
                $('#Kaigodo').children("[value='1']").attr("disabled","disabled");
                $('#Kaigodo').children("[value='2']").attr("disabled","disabled");
                $('#Kaigodo').children("[value='3']").removeAttr('disabled');
                $('#Kaigodo').children("[value='4']").removeAttr('disabled');
                $('#Kaigodo').children("[value='5']").removeAttr('disabled');
                $('#Kaigodo').children("[value='6']").removeAttr('disabled');
                $('#Kaigodo').children("[value='7']").removeAttr('disabled');
            } else {
                $('#fntYobou').hide();
                $('#Kaigodo').val('0');
                $('#Kaigodo').children("[value='1']").removeAttr('disabled');
                $('#Kaigodo').children("[value='2']").removeAttr('disabled');
                $('#Kaigodo').children("[value='3']").removeAttr('disabled');
                $('#Kaigodo').children("[value='4']").removeAttr('disabled');
                $('#Kaigodo').children("[value='5']").removeAttr('disabled');
                $('#Kaigodo').children("[value='6']").removeAttr('disabled');
                $('#Kaigodo').children("[value='7']").removeAttr('disabled');
            }
        });


 


	var enjohtml="";
        var enjonum=0;

        
        // ケアプランデータ反映（利用票より）
        // 曜日は考慮せず、利用者ごと、設定したサービスごとにデータをセットする。
        // セットする内容はサービス区分、時間のみ
        if(sakuseid.length>0) {
            for (sk in sakuseid) {
                setHTMLFormatEnjo();
                $('#TeikyoJikokuFrom'+sk).val(sakuseid[sk].start);
                $('#TeikyoJikokuTo'+sk).val(sakuseid[sk].end);
                $('#TeikyoKubun'+sk).val(sakuseid[sk].kubun);
                $('#EnjoDataID'+sk).val(sakuseid[sk].id);
                $('#Youbi'+sk).val(sakuseid[sk].youbi);
                $('#TantouHelperFirst'+sk).val(sakuseid[sk].helperfirst);
                $('#TantouHelperSecond'+sk).val(sakuseid[sk].helpersecond);
                $('#TantouHelperThird'+sk).val(sakuseid[sk].helperthird);
                $('#TantouHelperFourth'+sk).val(sakuseid[sk].helperfourth);
                $('#ServiceNaiyouFirst'+sk).val(sakuseid[sk].servicefirst);
                $('#ServiceNaiyouSecond'+sk).val(sakuseid[sk].servicesecond);
                $('#ServiceJikanFirst'+sk).val(sakuseid[sk].jikanfirst);
                $('#ServiceJikanSecond'+sk).val(sakuseid[sk].jikansecond);
                $('#RyuiJiko'+sk).val(sakuseid[sk].ryuijiko);
                $('#ServiceGoukeiJikan'+sk).val(sakuseid[sk].goukeijikan);
                $('.txtareaautoresize').autosize({append: "\n"});
            }
        } else {
//           setHTMLFormatEnjo();
        }


        $('#EnjoAdd').live('click',function(){
            setHTMLFormatEnjo();
            $('.txtareaautoresize').autosize({append: "\n"});
        });

        
        function setHTMLFormatEnjo() {
            var displaynum=enjonum+parseInt(1);
            enjohtml="";
            enjohtml=enjohtml+'<table style="width:900px;margin-top:1em;">';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:5%" rowspan="4"><input type="hidden" id="EnjoDataID'+enjonum+'" name="EnjoDataID'+enjonum+'" </td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:15%" rowspan="4">派遣曜日</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%" rowspan="4">';
		    enjohtml=enjohtml+'<input id="Youbi'+enjonum+'" name="Youbi'+enjonum+'" type="text" style="width:60px">';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%" rowspan="4">派遣時間</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%" rowspan="4">';
			enjohtml=enjohtml+'<input id="TeikyoJikokuFrom'+enjonum+'" name="TeikyoJikokuFrom'+enjonum+'" class="TeikyoJikokuFrom" type="time" style="width:100px">～';
			enjohtml=enjohtml+'<input id="TeikyoJikokuTo'+enjonum+'" name="TeikyoJikokuTo'+enjonum+'" class="TeikyoJikokuTo" type="time" style="width:100px">';                            
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">主に担当するヘルパー</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">';
		    enjohtml=enjohtml+'<select id="TantouHelperFirst'+enjonum+'" name="TantouHelperFirst'+enjonum+'" class="TantouHelperFirst"  style="">';
			enjohtml=enjohtml+'</select>';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">主に担当するヘルパー</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">';
		    enjohtml=enjohtml+'<select id="TantouHelperSecond'+enjonum+'" name="TantouHelperSecond'+enjonum+'" class="TantouHelperSecond"  style="">';
			enjohtml=enjohtml+'<option value=""></option>';
			enjohtml=enjohtml+'</select>';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">主に担当するヘルパー</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">';
		    enjohtml=enjohtml+'<select id="TantouHelperThird'+enjonum+'" name="TantouHelperThird'+enjonum+'" class="TantouHelperThird"  style="">';
			enjohtml=enjohtml+'<option value=""></option>';
			enjohtml=enjohtml+'</select>';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">主に担当するヘルパー</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">';
		    enjohtml=enjohtml+'<select id="TantouHelperFourth'+enjonum+'" name="TantouHelperFourth'+enjonum+'" class="TantouHelperFourth"  style="">';
			enjohtml=enjohtml+'<option value=""></option>';
			enjohtml=enjohtml+'</select>';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:5%;" rowspan="4"><div class="tate-area"><div class="tate-line">サ<span class="tate-cho">ー</span>ビス'+displaynum+'</div></div></td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:15%">サービス区分</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:40%" colspan="3">サービス内容</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%">所要時間（分）</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:30%">留意事項</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;" rowspan="2">';
//          サービス区分手入力(2014/05/15修正)
//		    enjohtml=enjohtml+'<select id="TeikyoKubun'+enjonum+'" name="TeikyoKubun'+enjonum+'" class="TeikyoKubun">';
//			enjohtml=enjohtml+'<option value=""></option>';
//			enjohtml=enjohtml+'</select>';
            enjohtml=enjohtml+'<input id="TeikyoKubun'+enjonum+'" name="TeikyoKubun'+enjonum+'" class="TeikyoKubun">';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;" colspan="3">';
		    enjohtml=enjohtml+'<textarea id="ServiceNaiyouFirst'+enjonum+'" name="ServiceNaiyouFirst'+enjonum+'"  style="width:100%" class="txtareaautoresize" maxlength="500" placeholder="最大500文字"></textarea>';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;">';
		    enjohtml=enjohtml+'<input id="ServiceJikanFirst'+enjonum+'" name="ServiceJikanFirst'+enjonum+'" type="number" step="1" min="0" placeholder="30" style="">';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;" rowspan="3">';
		    enjohtml=enjohtml+'<textarea id="RyuiJiko'+enjonum+'" name="RyuiJiko'+enjonum+'" style="width:100%" rows="5" class="txtareaautoresize" maxlength="500" placeholder="最大500文字"></textarea>';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;" colspan="3">';
		    enjohtml=enjohtml+'<textarea id="ServiceNaiyouSecond'+enjonum+'" name="ServiceNaiyouSecond'+enjonum+'"  style="width:100%" class="txtareaautoresize" maxlength="500" placeholder="最大500文字"></textarea>';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;">';
		    enjohtml=enjohtml+'<input id="ServiceJikanSecond'+enjonum+'" name="ServiceJikanSecond'+enjonum+'" type="number" step="1" min="0" placeholder="30" style="">';
            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'<tr>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;" colspan="4">合計時間</td>';
            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;">';
		    enjohtml=enjohtml+'<input id="ServiceGoukeiJikan'+enjonum+'" name="ServiceGoukeiJikan'+enjonum+'" type="number" step="1" min="0" placeholder="60" style="">';
            enjohtml=enjohtml+'</td>';
//            enjohtml=enjohtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;">';
//		    enjohtml=enjohtml+'<input id="RyuiJikoGoukei'+enjonum+'" name="RyuiJikoGoukei'+enjonum+'" type="text">';
//            enjohtml=enjohtml+'</td>';
            enjohtml=enjohtml+'</tr>';
            enjohtml=enjohtml+'</table>';
            $('#divEnjonaiyou').append(enjohtml);

            setHelperPulldown(enjonum);
            setServiceKbnPulldown(enjonum);
//            $('.txtareaautoresize').autosize({append: "\n"});

            enjonum++;
        }

	var choukihtml="";
        var choukinum=0;

        // ケアプランデータ反映（ケアプラン２より）
        // セットする内容は目標内容、時間のみ
        if(choukid.length>0) {
            for (ch in choukid) {
                setHTMLFormatChouki();
                $('#ChoukiDataID'+ch).val(choukid[ch].id);
                $('#ChoukiMokuhyou'+ch).val(choukid[ch].value);
                $('#ChoukiKikanStart'+ch).val(choukid[ch].start);
                $('#ChoukiKikanEnd'+ch).val(choukid[ch].end);
                $('.txtareaautoresize').autosize({append: "\n"});
            }
        } else {
//            setHTMLFormatChouki();
//            $('.txtareaautoresize').autosize({append: "\n"});
        }

        
        $('#btnChoukiMokuhyouAdd').live('click',function(){
            setHTMLFormatChouki();
            $('.txtareaautoresize').autosize({append: "\n"});
        });

//        setHTMLFormatChouki();

        function setHTMLFormatChouki() {
            var displayChoukinum=choukinum+parseInt(1);
            choukihtml="";
            choukihtml=choukihtml+'<tr>';
            choukihtml=choukihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%"><font>長期目標'+displayChoukinum+'</font></td><input type="hidden" id="ChoukiDataID'+choukinum+'" name="ChoukiDataID'+choukinum+'" >';
            choukihtml=choukihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;width:45%">';
		    choukihtml=choukihtml+'<textarea id="ChoukiMokuhyou'+choukinum+'" name="ChoukiMokuhyou'+choukinum+'" class="txtareaautoresize" rows="1" style="width:100%" maxlength="100" placeholder="最大100文字"></textarea>';
            choukihtml=choukihtml+'</td>';
            choukihtml=choukihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%"><font>支援期間</font></td>';
            choukihtml=choukihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:25%">';
		    choukihtml=choukihtml+'<input id="ChoukiKikanStart'+choukinum+'" name="ChoukiKikanStart'+choukinum+'" class=\"ChoukiKikanStart\" type="text" style="width:140px;background-color:lightyellow;" readonly>～';
		    choukihtml=choukihtml+'<input id="ChoukiKikanEnd'+choukinum+'" name="ChoukiKikanEnd'+choukinum+'" class=\"ChoukiKikanEnd\" type="text" style="width:140px;background-color:lightyellow" readonly>';
            choukihtml=choukihtml+'</td>';
            choukihtml=choukihtml+'</tr>';
            $('#tblChoukiMokuhyou').append(choukihtml);
            setDateChoukiFormat(choukinum);
//            $('.txtareaautoresize').autosize({append: "\n"});
            choukinum++;
        }
	var tankihtml="";
        var tankinum=0;

        // ケアプランデータ反映（ケアプラン２より）
        // セットする内容は目標内容、時間のみ
        if(tankid.length>0) {
            for (ta in tankid) {
                setHTMLFormatTanki();
                $('#TankiDataID'+ta).val(tankid[ta].id);
                $('#TankiMokuhyou'+ta).val(tankid[ta].value);
                $('#TankiKikanStart'+ta).val(tankid[ta].start);
                $('#TankiKikanEnd'+ta).val(tankid[ta].end);
                $('.txtareaautoresize').autosize({append: "\n"});
            }
        } else {
//            setHTMLFormatTanki();
//            $('.txtareaautoresize').autosize({append: "\n"});
        }

        
        $('#btnTankiMokuhyouAdd').live('click',function(){
            setHTMLFormatTanki();
            $('.txtareaautoresize').autosize({append: "\n"});
        });

        
        function setHTMLFormatTanki() {
            var displayTankinum=tankinum+parseInt(1);
            tankihtml="";
            tankihtml=tankihtml+'<tr>';
            tankihtml=tankihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%"><font>短期目標'+displayTankinum+'</font></td><input type="hidden" id="TankiDataID'+tankinum+'" name="TankiDataID'+tankinum+'">';
            tankihtml=tankihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;width:45%">';
		    tankihtml=tankihtml+'<textarea id="TankiMokuhyou'+tankinum+'" name="TankiMokuhyou'+tankinum+'" class="txtareaautoresize" rows="1" style="width:100%" maxlength="100" placeholder="最大100文字"></textarea>';
            tankihtml=tankihtml+'</td>';
            tankihtml=tankihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%"><font>支援期間</font></td>';
            tankihtml=tankihtml+'<td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:25%">';
		    tankihtml=tankihtml+'<input id="TankiKikanStart'+tankinum+'" name="TankiKikanStart'+tankinum+'" class=\"TankiKikanStart\" type="text" style="width:140px;background-color:lightyellow;" readonly>～';
		    tankihtml=tankihtml+'<input id="TankiKikanEnd'+tankinum+'" name="TankiKikanEnd'+tankinum+'" type="text" style="width:140px;background-color:lightyellow;" class=\"TankiKikanEnd\" readonly>';
            tankihtml=tankihtml+'</td>';
            tankihtml=tankihtml+'</tr>';
            $('#tblTankiMokuhyou').append(tankihtml);
            setDateTankiFormat(tankinum);
//            $('.txtareaautoresize').autosize({append: "\n"});
            tankinum++;
        }


        function setHelperPulldown(num) {
            if(helperd.length>0) {
                 for(var hp in helperd) {
                     $('.TantouHelperFirst').eq(num).append('<option value="'+helperd[hp].id+'">'+helperd[hp].name+'</option>');
                     $('.TantouHelperSecond').eq(num).append('<option value="'+helperd[hp].id+'">'+helperd[hp].name+'</option>');
                     $('.TantouHelperThird').eq(num).append('<option value="'+helperd[hp].id+'">'+helperd[hp].name+'</option>');
                     $('.TantouHelperFourth').eq(num).append('<option value="'+helperd[hp].id+'">'+helperd[hp].name+'</option>');
                 }
            }
        }

//        setHelperPulldown(0);

        function setShomeiSetsumeishaPulldown() {
            if(helper_setumeid.length>0) {
                 for(var hp in helper_setumeid) {
//                     $('#slShomeiSetsumeisha').append('<option value="'+helperd[hp].id+'">'+helperd[hp].name+'</option>');
                     $('#lsShomeiSetsumeisha').append('<option value="'+helper_setumeid[hp].name+'">');
                 }
            }
        }

        setShomeiSetsumeishaPulldown();


        function setJigyoushaPulldown() {
            if(jigyoushad.length>0) {
                 for(var jg in jigyoushad) {
                     $('#slShomeiJigyousha').append('<option value="'+jigyoushad[jg].id+'">'+jigyoushad[jg].value+'</option>');
                 }
            }
        }

        setJigyoushaPulldown();



        function setServiceKbnPulldown(num) {
           if(kaigoservice.length>0) {
                 for(var ks in kaigoservice) {
                     $('.TeikyoKubun').eq(num).append('<option value="'+kaigoservice[ks].id+'">'+kaigoservice[ks].value+'</option>');
                 }
           }
        }

       setServiceKbnPulldown(0);
        

        var curdate = new Date();
        var curyear = curdate.getFullYear();
        var nextmonth = curdate.getMonth()+parseInt(2);
        if(nextmonth>12){
            nextmonth=1;
        }
        var nextyear = curyear+parseInt(1);
        $("#taishouyear").append('<option value="'+curyear+'">'+curyear+'</option>');
        $("#taishouyear").append('<option value="'+nextyear+'">'+nextyear+'</option>');
        for(var m=1; m<13; m++) {
            if(m==nextmonth) {
	            $("#taishoumonth").append('<option value="'+m+'" selected>'+m+'</option>');
            } else {
	            $("#taishoumonth").append('<option value="'+m+'">'+m+'</option>');
            }
        }

        for(var h in helperd) {
            $('#Tantousha').append('<option value="'+helperd[h].id+'">'+helperd[h].name+'</option>');
        }

        $('#CareplanHanei').click(function(){
            $('#MODE').val("careplan");
            
            document.frmHelperKeikakusho.action="HOUMONKAIGO_KEIKAKU.CGI"
            document.frmHelperKeikakusho.target="_self";
            document.frmHelperKeikakusho.submit();

        });


		// 現状、終了時刻のテキストボックスからフォーカスが離れた際にサービスのプルダウン項目制御が行われる。
		// 供給者の事業者タイプ、事業者の規模、施設種類、介護度、時間によってフィルタリングされる。

                function controlServicePulldown(idx) {
                        $('#TeikyoKubun'+idx).children().remove();
                        $('#TeikyoKubun'+idx).append("<option value=\"\"></option>");
                        var StartTime=$('#TeikyoJikokuFrom'+idx).val().split(":");
                        var EndTime=$('#TeikyoJikokuTo'+idx).val().split(":");
                        var StartMinutes=StartTime[0]*60+parseInt(StartTime[1]);
                        var EndMinutes=EndTime[0]*60+parseInt(EndTime[1]);
                        var KikanMinutes=parseInt(EndMinutes)-parseInt(StartMinutes);

			for (var ks in kaigoservice) {
                             if($("#slKeikakuType").val()=="0") {
				if(kaigoservice[ks].jigyoushatype=="11") {
                                     if(kaigoservice[ks].scale==JigyoushaScale&&kaigoservice[ks].servicemanager==servicemanager) {
					if(kaigoservice[ks].min<=KikanMinutes&&KikanMinutes<kaigoservice[ks].max) {
                                          if((StartTime[0]<22&&StartTime[0]>17)||(StartTime[0]>5&&StartTime[0]<8)) {
                                            if(kaigoservice[ks].asayoru=='2') {
                                               $('#TeikyoKubun'+idx).append("<option value=\""+kaigoservice[ks].id+"\">"+kaigoservice[ks].value+"</option>");
                                            }
                                          } else if(StartTime[0]>21||StartTime[0]<6) {
                                            if(kaigoservice[ks].shinya=='2') {
                                               $('#TeikyoKubun'+idx).append("<option value=\""+kaigoservice[ks].id+"\">"+kaigoservice[ks].value+"</option>");
                                            }
                                          } else {
                                            if(kaigoservice[ks].asayoru=='1'&&kaigoservice[ks].shinya=='1') {
                                               $('#TeikyoKubun'+idx).append("<option value=\""+kaigoservice[ks].id+"\">"+kaigoservice[ks].value+"</option>");
                                            }
                                          }
					} else {
//　時間に関係ない項目（通院介助など）
                                           if(kaigoservice[ks].min==="_"&&kaigoservice[ks].max==="_") {
                                               $('#TeikyoKubun'+idx).append("<option value=\""+kaigoservice[ks].id+"\">"+kaigoservice[ks].value+"</option>");
                                           }
					}
                                     } else {
                                        if(kaigoservice[ks].scale==JigyoushaScale&&kaigoservice[ks].min==="_"&&kaigoservice[ks].max==="_") {
                                               $('#TeikyoKubun'+idx).append("<option value=\""+kaigoservice[ks].id+"\">"+kaigoservice[ks].value+"</option>");
                                        }
                                     }
                                }
                            } else {
				if(kaigoservice[ks].jigyoushatype=="61") {
//　時間や規模などに関係ない項目
                                    if(kaigoservice[ks].kaigodo<=youkaigodo&&kaigoservice[ks].servicemanager==servicemanager&&kaigoservice[ks].douitsu==Douitsu){
                                        $('#TeikyoKubun'+idx).append("<option value=\""+kaigoservice[ks].id+"\">"+kaigoservice[ks].value+"</option>");
                                    }
				}
                            }
			}
                }

		$(".TeikyoJikokuFrom").live('blur',function() {
                    var index=$(".TeikyoJikokuFrom").index(this);
                    controlServicePulldown(index);
		});
		$(".TeikyoJikokuTo").live('blur',function() {
                    var index=$(".TeikyoJikokuTo").index(this);
                    controlServicePulldown(index);
		});
        
        $.datepicker.setDefaults({
                changeYear:true,
                changeMonth:true,
                yearRange:"c-130:c+1",
                dateFormat: 'yy/mm/dd',
                dayNamesShort: ['日','月','火','水','木','金','土'],
                dayNamesMin: ['日','月','火','水','木','金','土'],
            yearSuffix: ''
        });

                $(function(){
                    $("#SakuseiDate").datepicker({
                            onSelect: function(dateText, inst){
                                var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],true)+"年"+parseInt(ArrDate[1])+"月"+parseInt(ArrDate[2])+"日";
                                $("#SakuseiDate").val(DispDate);
                                $("#hdSakuseiDate").val(ArrDate[0]+ArrDate[1]+ArrDate[2]);
                            }
                    });
                    $("#txtShomeiSetsumeibi").datepicker({
                            onSelect: function(dateText, inst){
                                var ArrDate=dateText.split("/");
                                var DispDate=convert_wareki(ArrDate[0],true)+"年"+parseInt(ArrDate[1])+"月"+parseInt(ArrDate[2])+"日";
                                $("#txtShomeiSetsumeibi").val(DispDate);
                            }
                    });
                });


                    function setDateChoukiFormat(num) {
                        $(".ChoukiKikanStart").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                        var DispDate=convert_wareki(ArrDate[0],true)+"年"+parseInt(ArrDate[1])+"月"+parseInt(ArrDate[2])+"日";
                                        $(".ChoukiKikanStart").eq(num).val(DispDate);
                                }
                        });
                        $(".ChoukiKikanEnd").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                        var DispDate=convert_wareki(ArrDate[0],true)+"年"+parseInt(ArrDate[1])+"月"+parseInt(ArrDate[2])+"日";
                                        $(".ChoukiKikanEnd").eq(num).val(DispDate);
                                }
                        });
                    }
                    function setDateTankiFormat(num) {
                        $(".TankiKikanStart").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                        var DispDate=convert_wareki(ArrDate[0],true)+"年"+parseInt(ArrDate[1])+"月"+parseInt(ArrDate[2])+"日";
                                        $(".TankiKikanStart").eq(num).val(DispDate);
                                }
                        });
                        $(".TankiKikanEnd").eq(num).datepicker({
                                onSelect: function(dateText, inst){
                                        var ArrDate=dateText.split("/");
                                        var DispDate=convert_wareki(ArrDate[0],true)+"年"+parseInt(ArrDate[1])+"月"+parseInt(ArrDate[2])+"日";
                                        $(".TankiKikanEnd").eq(num).val(DispDate);
                                }
                        });
                     }


                function convert_wareki(year, setting){
                    var result;
                    if(setting === false){
                        return year;
//                 ###GENGOU###
                    } else if (year > %3) {
                        result = year - %3;
                        result = '%2' + result;
                        return result;
//                 ###GENGOU###
                    }
                }
            

        $("#hdSakuseiDate").val('###HDSAKUSEIDATE###');
        $("#SakuseiDate").val('###SAKUSEIDATE###');
        $("#slKeikakuType").val('###SLKEIKAKUTYPE###');
        $("#Tantousha").val('###TANTOUSHA###');
        $("#Gender").val('###GENDER###');
        $("#BirthDate").val('###BIRTHDATE###');
        $("#Kaigodo").val('###KAIGODO###');
        $("#Address").val('###ADDRESS###');
        $("#Tel").val('###TEL###');
        $("#slShomeiJigyousha").val('###SLSHOMEIJIGYOUSHA###');
        $("#txtShomeiSetsumeibi").val('###TXTSHOMEISETSUMEIBI###');
        $("#slShomeiSetsumeisha").val('###SLSHOMEISETSUMEISHA###');


        // メニュー上のボタン制御
        $("#home").click(function(){
            document.frmBack.submit();
        });

        $("#Hyouji").click(function(){
            $('#MODE').val("init");
            document.frmHelperKeikakusho.target="popwindow";
            document.frmHelperKeikakusho.action="POP_SENTAKU_KEIKAKU.CGI"
            document.frmHelperKeikakusho.method="POST"
            document.frmHelperKeikakusho.submit();
        });
        $("#print").click(function(){
            $("#MODE").val('print');
            document.frmHelperKeikakusho.action="HOUMONKAIGO_KEIKAKU.CGI"
            document.frmHelperKeikakusho.target="printwindow";
            document.frmHelperKeikakusho.submit();
        });
        //削除ボタン
        $("#delete").click(function(){
            $("#MODE").val('delete');
            if(!window.confirm('データを削除しますか？')){
               return false;
            }
            document.frmHelperKeikakusho.action="HOUMONKAIGO_KEIKAKU.CGI"
            document.frmHelperKeikakusho.target="_self";
            document.frmHelperKeikakusho.submit();
        });
        //登録ボタン
        $("#regist").click(function(){
			//バリデーションチェック
			var message = "";
			message += idealValidateCheck($("#frmHelperKeikakusho").find("input[type='number'],input:text").not("[disabled='disabled']"), true);
			//派遣時間入れ子チェック
			message += validateTime();
			if (message != "") {
				alert(message.replace(/undefined/g, ""));
				$("button").attr("disabled", false);
				return false;
			}
            $("#MODE").val('regist');
            $("#CHOUKINUM").val(choukinum);
            $("#TANKINUM").val(tankinum);
            $("#ENJONUM").val(enjonum);
            document.frmHelperKeikakusho.action="HOUMONKAIGO_KEIKAKU.CGI"
            document.frmHelperKeikakusho.target="_self";
            document.frmHelperKeikakusho.submit();
        });

        $('.txtareaautoresize').autosize({append: "\n"});


	});

                $('.shisetsulist').live('mouseover',function(){
                   this.style.backgroundColor="lightgrey";
                });
                $('.shisetsulist').live('mouseout',function(){
                   this.style.backgroundColor="white";
                });
		function validateTime() {
			var message = "";
			//　1行ずつバリデーションチェックする（trueの場合エラー）
			var separator = ":";
			//　各フラグ設定
			var timeCompareCheckFlag = false;
			//派遣時間セレクター
			var sTimes = $(".well").find("input[type='time'][name*='TeikyoJikokuFrom']").get();
			var eTimes = $(".well").find("input[type='time'][name*='TeikyoJikokuTo']").get();
			for (var i=0; i<sTimes.length; i++) {
				//既にフラグがtrueだったらループ回避
				if (timeCompareCheckFlag) {
					break;
				}
				var sTime = $(sTimes).get(i);
				var eTime = $(eTimes).get(i);
				//開始・終了時間差分チェック
				if (!timeCompareCheckFlag) {
					var sTimeVal = $(sTime).val();
					var eTimeVal = $(eTime).val();
					//開始時間が23時台かつ終了時間が0時台の場合はチェック実施しない
					if (!(sTimeVal.match(/^23/) && eTimeVal.match(/^00/))) {
						timeCompareCheckFlag = timeCompare(sTimeVal, eTimeVal, separator);
					}
				}
			}
			if (timeCompareCheckFlag) {
				message += (msgMst.num5).replace("{0}", HOUMONKAIGO_Item.num0)
										.replace("{1}", HOUMONKAIGO_Item.num1) + "\n";
			}
			return message;
		}
	</script>

    <!-- Demo page code -->

    <style type="text/css">
        #line-chart {
            height:300px;
            width:800px;
            margin: 0px auto;
            margin-top: 1em;
        }

        .clsServiceNaiyou {
            width:100%;
        }

        .clsRyuiJikou {
            width:100%;
        }
        div.tate-area{
	   float:right;
        }
        div.tate-line{
	    float:right;
	    width:1.05em;
	    line-height:1.05em;
	    margin-right:0.3em;
	    margin-left:0.3em;
	    padding-bottom:0.2em;
	    font-family:'ヒラギノ角ゴ ProN','Hiragino Kaku Gothic ProN','ヒラギノ角ゴ Pro','Hiragino Kaku Gothic Pro','メイリオ','Meiryo','ＭＳ ゴシック','MS Gothic','SimHei','HiraKakuProN-W3','STHeitiJ-Medium','TakaoExゴシック','TakaoExGothic','MotoyaLCedar','Droid Sans Japanese','Droid Sans Fallback',monospace;
	    word-wrap:break-word;
	    direction:ltr;
        }
        .tate-line span.tate-cho{
	    display:block;
	    -moz-transform:matrix(0, 1, 1, 0, 0, 0);
	    -webkit-transform:matrix(0, 1, 1, 0, 0, 0);
	    -o-transform:matrix(0, 1, 1, 0, 0, 0);
	    transform:matrix(0, 1, 1, 0, 0, 0);
	    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1, mirror=1);
        }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="lib/html5.js"></script>
    <![endif]-->

  </head>

  <!--[if lt IE 7 ]> <body class="ie ie6"> <![endif]-->
  <!--[if IE 7 ]> <body class="ie ie7 "> <![endif]-->
  <!--[if IE 8 ]> <body class="ie ie8 "> <![endif]-->
  <!--[if IE 9 ]> <body class="ie ie9 "> <![endif]-->
  <!--[if (gt IE 9)|!(IE)]><!--> 
  <body class=""> 
  <!--<![endif]-->
<div class="navbar">
  <div class="navbar-inner">
    <ul class="nav pull-left">
      <li>
        <font class="brand"><span style="position:relative; top:-4px; padding-left:6px;"><img src="/images/HSS_LOGO_COLOR2.png" alt="HSSマーク" width="290" height="26"></span><span style="position:relative; top:-2px;">開発環境</span></font>
      </li>
    </ul>
    <ul class="nav pull-right">
      <li id="fat-menu2">
        <a href="javascript:Post('###USERID###','###PASSWORD###','###SHISETSUID###','/E-LIFE/SYSTEM_SETTEI/cgi-bin/SIGN_IN.CGI')" tabindex="-1">ログアウト</a>
      </li>
    </ul>
    <ul class="nav pull-right">
      <li class="dropdown" id="fat-menu">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
          <!-- ###USER__NAME### -->
          <i class="icon-user"></i>
          %1
          <!-- ###USER__NAME### -->
        </a>
      </li>
    </ul>
    <ul class="nav pull-right">
      <li class="dropdown on" id="fat-menu3">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" tabindex="-1">
          ###SELECT_SHISETSU###
          <i class="icon-caret-down"></i>
        </a>
        <ul id="shisetsuList_ul" class="dropdown-menu" style="z-index:1000">
          <!-- ###SHISETSU_TAISHOU### -->
          <li class="shisetsulist">
            <a href="javascript:Post('###USERID###','###PASSWORD###','%1','/E-LIFE/SYSTEM_SETTEI/cgi-bin/LOGIN.CGI')">%2</a>
          </li>
          <!-- ###SHISETSU_TAISHOU### -->
        </ul>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <h1 class="page-title"><font id="fntYobou" name="fntYobou" style="###YOBOU###">予防支援</font>訪問介護計画書入力
  </h1>
</div>
<div class="row-fluid">
  <table style="margin:10px 0em 10px 2em;min-width:1024px;">
    <tr>
      <td style="width:30%;">
        利用者名：
        <font style="font-size:20px">
          <b>###RIYOUSHA###</b>
        </font>
      </td>
      <td style="width:15%;">
        <button class="btn btn-blue" id="Hyouji">
          <i class="icon-search"></i>
          過去履歴データ表示</button>
      </td>
      <td style="width:15%;">
        <button id="CareplanHanei" name="CareplanHanei" style="vertical-align:center;" type="button">ケアプラン反映</button>
      </td>
      <td style="text-align:right;">
        <div class="btn-toolbar">
          <button class="btn btn-pink" id="regist" name="regist" style="display:###TOUROKUDISP###">
            <i class="icon-edit"></i>
            登録
          </button>
          <button class="btn btn-red" id="delete" name="delete" style="display:###TOUROKUDISP###" ><i class="icon-trash"></i> 削除</button>
          <button class="btn btn-green" id="print" name="print" style="display:###PRINTDISP###" type="button">
            <i class="icon-print"></i>
            印刷
          </button>
          <button class="btn btn-move" id="home" name="home">
            <i class="icon-home"></i>
            戻る
          </button>
        </div>
      </td>
    </tr>
  </table>
</div>
<div class="container-fluid">
  <div class="well" style="min-width:1024px;">
    <form action="HOUMONKAIGO_KEIKAKU.CGI" id="frmHelperKeikakusho" method="POST" name="frmHelperKeikakusho">
      <input id="MODE" name="MODE" type="hidden" />
      <input id="Riyoushaid" name="Riyoushaid" type="hidden" value="###RIYOUSHAID###" />
      <input id="USER_ID" name="USER_ID" type="hidden" value="###USERID###" />
      <input name="hdKensakuShisetsu" type="hidden" value="###HDKENSAKUSHISETSU###" />
      <input id="CHOUKINUM" name="CHOUKINUM" type="hidden" />
      <input id="TANKINUM" name="TANKINUM" type="hidden" />
      <input id="ENJONUM" name="ENJONUM" type="hidden" />
      <input id="TaishouYear" name="TaishouYear" type="hidden" value="2013" />
      <input id="TaishouMonth" name="TaishouMonth" type="hidden" value="12" />
      <input id="Kyoukyusha" name="Kyoukyusha" type="hidden" value="0005" />
      <input name="userid" type="hidden" value="###USERID###" />
      <input name="password" type="hidden" value="###PASSWORD###" />
      <input name="shisetsu" type="hidden" value="###SHISETSUID###" />
      <div style="min-height:400px;overflow-y:auto">
        <table style="width:900px;margin-top:1em;">
          <tr>
            <td style="width:20%">
              計画書タイプ
              <select id="slKeikakuType" name="slKeikakuType">
                <option value="0">介護</option>
                <option value="1">予防</option>
                <option value="2">未認定</option>
              </select>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <font>計画作成者氏名</font>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <select id="Tantousha" name="Tantousha"></select>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <font>作成年月日</font>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <input id="SakuseiDate" name="SakuseiDate" readonly="" style="width:140px;background-color:lightyellow;" type="text" />
              <input id="hdSakuseiDate" name="hdSakuseiDate" style="" type="hidden" />
            </td>
          </tr>
        </table>
        <table style="width:900px;margin-top:1em;">
          <tr>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:15%">
              <font>利用者氏名</font>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:30%">
              <input id="Riyousha" name="Riyousha" readonly type="text" value="###RIYOUSHA###" />
              <select id="Gender" name="Gender" readonly style="">
                <option value="1">男</option>
                <option value="2">女</option>
              </select>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%">
              <font>生年月日</font>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <input id="BirthDate" name="BirthDate" readonly="" style="width:140px" type="text" />
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%">
              <font>要介護</font>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:15%">
              <select id="Kaigodo" name="Kaigodo" readonly="" style="width:100px">
                <option value="0">未認定</option>
                <option value="1">要支援１</option>
                <option value="2">要支援２</option>
                <option value="3">要介護１</option>
                <option value="4">要介護２</option>
                <option value="5">要介護３</option>
                <option value="6">要介護４</option>
                <option value="7">要介護５</option>
              </select>
            </td>
          </tr>
        </table>
        <table style="width:900px;">
          <tr>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:15%">
              <font>住所</font>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:60%">
              <input id="Address" name="Address" style="width:100%" type="text" value="" />
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:10%">
              <font>電話番号</font>
            </td>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;">
              <input id="Tel" name="Tel" style="" type="tel" value="" />
            </td>
          </tr>
        </table>
        <table style="width:900px;margin-top:1em;">
          <tr>
            <td colspan="4" style="width:40%">
              <label>【援助目標】</label>
            </td>
          </tr>
          <tr>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <font>ご本人の希望</font>
            </td>
            <td colspan="3" style="margin-top:.5em;border:1px solid #bbbbbb;width:80%">
              <textarea id="HonninKibou" name="HonninKibou" rows="1" style="width:100%" maxlength="100" class="txtareaautoresize" placeholder="最大100文字">###HONNINKIBOU###</textarea>
            </td>
          </tr>
          <tr>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <font>ご家族の希望</font>
            </td>
            <td colspan="3" style="margin-top:.5em;border:1px solid #bbbbbb;width:80%">
              <textarea id="KazokuKibou" name="KazokuKibou" rows="1" style="width:100%" maxlength="100" class="txtareaautoresize" placeholder="最大100文字">###KAZOKUKIBOU###</textarea>
            </td>
          </tr>
          <tr>
            <td style="margin-top:.5em;border:1px solid #bbbbbb;padding:10px 10px 10px 10px;width:20%">
              <font>解決すべき課題ニーズ</font>
            </td>
            <td colspan="3" style="margin-top:.5em;border:1px solid #bbbbbb;width:80%">
              <textarea id="Needs" name="Needs" rows="1" style="width:100%" maxlength="500" class="txtareaautoresize" placeholder="最大500文字">###NEEDS###</textarea>
            </td>
          </tr>
          <tr>
            <td colspan="4">
              <table id="tblChoukiMokuhyou" name="tblChoukiMokuhyou" style="width:100%"></table>
            </td>
          </tr>
          <tr>
            <td colspan="4">
              <button id="btnChoukiMokuhyouAdd" name="btnChoukiMokuhyouAdd" type="button">長期目標追加</button>
            </td>
          </tr>
          <tr>
            <td colspan="4">
              <table id="tblTankiMokuhyou" name="tblTankiMokuhyou" style="width:100%"></table>
            </td>
          </tr>
          <tr>
            <td colspan="4">
              <button id="btnTankiMokuhyouAdd" name="btnTankiMokuhyouAdd" type="button">短期目標追加</button>
            </td>
          </tr>
        </table>
        <table style="width:900px;margin-top:1em;">
          <tr>
            <td style="width:30%">
              <label>【援助内容】</label>
            </td>
            <td style="width:30%">
              <button id="EnjoAdd" name="EnjoAdd" type="button">援助内容追加</button>
            </td>
          </tr>
        </table>
        <div id="divEnjonaiyou" name="divEnjonaiyou"></div>
        <table style="width:900px;margin-top:2em;">
          <tr>
            <td style="padding:10px 10px 10px 10px;">【説明・同意・交付署名欄】</td>
          </tr>
          <tr>
            <td style="padding:10px 10px 10px 10px;">上記の訪問介護計画書に基づきサービス提供を行います。</td>
          </tr>
          <tr>
            <td style="padding:10px 10px 10px 10px;">
              &nbsp;&nbsp;訪問介護事業所名：
              <select id="slShomeiJigyousha" name="slShomeiJigyousha"></select>
            </td>
          </tr>
          <tr>
            <td style="padding:10px 10px 10px 10px;">
              &nbsp;&nbsp;&nbsp;&nbsp;説明日：<input id="txtShomeiSetsumeibi" name="txtShomeiSetsumeibi" readonly="" style="width:140px;background-color:lightyellow" type="text" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;説明者
              <input type="text" id="slShomeiSetsumeisha" name="slShomeiSetsumeisha" list="lsShomeiSetsumeisha" ><datalist id="lsShomeiSetsumeisha"></datalist>
            </td>
          </tr>
          <tr>
            <td style="padding:10px 10px 10px 10px;">上記の訪問介護計画書について説明を受け、内容に同意し、交付を受けました。</td>
          </tr>
          <tr>
            <td style="padding:10px 10px 10px 10px;float:right">利用者等署名欄：___________________　印</td>
          </tr>
        </table>
      </div>
    </form>
  </div>
</div>
<form action="HOUMONKAIGO_MENU.CGI" id="frmBack" method="POST" name="frmBack">
  <input name="Riyoushaid" type="hidden" value="###RIYOUSHAID###" />
  <input name="hdKensakuShisetsu" type="hidden" value="###HDKENSAKUSHISETSU###" />
  <input name="USER_ID" type="hidden" value="###USERID###" />
  <input name="MODE" type="hidden" value="init" />
  <input name="userid" type="hidden" value="###USERID###" />
  <input name="password" type="hidden" value="###PASSWORD###" />
  <input name="shisetsu" type="hidden" value="###SHISETSUID###" />
</form>
<form action="" method="post" name="formlink">
  <input name="userid" type="hidden" />
  <input name="password" type="hidden" />
  <input name="cgi" type="hidden" />
  <input name="shisetsu" type="hidden" />
</form>

    <script type="text/javascript">
        function Post(md,tx,shisetsu,url) {
            formlink.userid.value = md;
            formlink.password.value = tx;
            formlink.shisetsu.value = shisetsu;
            formlink.action=url;
            formlink.cgi.value = url;
            formlink.submit();
        }
    </script>

    <script src="/js/bootstrap.js"></script>
    <script type="text/javascript">
        $("[rel=tooltip]").tooltip();
        $(function() {
            $('.demo-cancel-click').click(function(){return false;});
        });
    </script>
    
  </body>
</html>


