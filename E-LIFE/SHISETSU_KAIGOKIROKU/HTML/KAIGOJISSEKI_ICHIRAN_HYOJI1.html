<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <title>施設介護実績照会</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">
    
    <link rel="stylesheet" type="text/css" href="/css/theme.css">
    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/jquery-ui.css" />

    <script src="/js/jquery-1.7.2.min.js" type="text/javascript"></script>

    <link href='/css/fullcalendar.css' rel='stylesheet' />
    <link href='/css/fullcalendar.print.css' rel='stylesheet' media='print' />
    <script src='/js/jquery-1.9.1.min.js'></script>
    <script src='/js/jquery-ui-1.10.2.custom.min.js'></script>
    <script src='/js/fullcalendar.js'></script>
    <script src="/js/jquery-ui.js"></script>
    <script src="/js/jquery.ui.datepicker-ja.js"></script>
	<script src="/js/validateUtils.js"></script>
	<script src="/js/messageMaster.js"></script>
	<script src="/js/KAIGOKANGOKIROKUUtils.js"></script>
	<script>

	$(document).ready(function() {

        $('input,textarea[readonly]').not($('input[type="button"],input[type="submit"]')).keypress(function (e) {
            if (!e) var e = window.event;
            if (e.keyCode == 13)
                return false;
        });

        $("form").submit(function() {
          $("button").each(function() {
            $(this).attr("disabled", true);
          });
        });

      $(".zebra").hover(function(){
         this.style.backgroundColor = "lightblue";},
         function(){
         this.style.backgroundColor = "white";
      });

      $("#sentaku_tbl :checkbox").click(function(){
        var che = $(this).prop('checked');
        var che_ed = $(this).attr("id");
        var che_name = "#" + che_ed + "_open";
        var check_box = "#" + che_ed + "_open :checkbox";
        $(check_box).removeAttr('checked');
        var checked_table = che_name + " :text," +
        					che_name + " select," +
        					che_name + " textarea," +
        					che_name + " input[type='time']";
        $(checked_table).prop('disabled','disabled');
        return true;
      });

      $("#shokuji_suibun_open :checkbox").each(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#haisetsu_open :checkbox").each(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
		var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#nyuyoku_open :checkbox").each(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#senmen_open :checkbox").each(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#kihon_dousa_open :checkbox").each(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#iryo_kenkou_open :checkbox").each(function(){
        var chk = $(this).prop('checked');
        if(chk == true){
          $("#iryo_kenkou_open :text,#iryo_kenkou_open select,#iryo_kenkou_open textarea,#iryo_kenkou_open input[type='time']").prop('disabled','');
        }else{
          $("#iryo_kenkou_open :text,#iryo_kenkou_open select,#iryo_kenkou_open textarea,#iryo_kenkou_open input[type='time']").prop('disabled','disabled');
        }
        return true;
       });

      $("#shinri_shakai_open :checkbox").each(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#shokuji_suibun_open :checkbox").click(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#haisetsu_open :checkbox").click(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#nyuyoku_open :checkbox").click(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#senmen_open :checkbox").click(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#kihon_dousa_open :checkbox").click(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#iryo_kenkou_open :checkbox").click(function(){
        var chk = $(this).prop('checked');
        if(chk == true){
          $("#iryo_kenkou_open :text,#iryo_kenkou_open select,#iryo_kenkou_open textarea,#iryo_kenkou_open input[type='time']").prop('disabled','');
        }else{
          $("#iryo_kenkou_open :text,#iryo_kenkou_open select,#iryo_kenkou_open textarea,#iryo_kenkou_open input[type='time']").prop('disabled','disabled');
        }
        return true;
       });

      $("#shinri_shakai_open :checkbox").click(function(){
        var chk = $(this).prop('checked');
        var chked = $(this).attr("id");
        var chkedname = "table#" + chked + "_select" + " :text," +
        				"table#" + chked + "_select" + " select," +
        				"table#" + chked + "_select" + " textarea," +
        				"table#" + chked + "_select" + " input[type='time']";
        if(chk == true){
          $( chkedname ).prop('disabled','');
        }else{
          $( chkedname ).prop('disabled','disabled');
        }
        return true;
       });

      $("#sentaku_tbl :checkbox").each(function(){
        var chebx = $(this).prop('checked');
        var chkedbx = $(this).attr("id");
        var chkedbxname = "#" + chkedbx + "_open";
        if(chebx == true){
          $( chkedbxname ).toggle();
        }else{
          $( chkedbxname ).hide();
        }
        return true;
    });


      $(function(){
          $("#area_select").change(function(){
              var area = 'div.' + $('#area_select').val();
              if (area == 'div.all'){
                $('#list div').hide();
                $(area).show();
              }
              else {
                $('#list div').hide();
                $(area).show();
              }
          });
      });

      $(function(){
          $("#area_select").each(function(){
              var area = 'div.' + $('#area_select').val();
              if (area == 'div.all'){
                $('#list div').hide();
                $(area).show();
              }
              else {
                $('#list div').hide();
                $(area).show();
              }
          });
      });

        $("#search_btn").click(function(){
          $("#MODE").attr({value:"search"});
          var form = $("#MENU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHISETSU_KAIGOKIROKU/cgi-bin/KAIGOJISSEKI_ICHIRAN_HYOJI.CGI"
          });
                $('#kensakutyu').html('<table style="width:100%; height:100%"><tr><td style="font-size:16px; width:100%; text-align:center;"><div id="blink_1">検索中です。しばらくお待ちください。</div></td></tr></table>');
                form.submit();
        });

        $("#touroku_btn").click(function(){
			//バリデーションチェック
			var message = "";
			message += validationCheck();
			if (message != "") {
				alert(message);
				return false;
			}
          $("#MODE").attr({value:"touroku"});
          var form = $("#MENU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHISETSU_KAIGOKIROKU/cgi-bin/KAIGOJISSEKI_ICHIRAN_HYOJI.CGI"
          });
                form.submit();
        });

        $("#return_btn").click(function(){
          $("#MODE").attr({value:"search"});
          var form = $("#MENU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHISETSU_KAIGOKIROKU/cgi-bin/KAIGOJISSEKI_ICHIRAN_HYOJI.CGI"
          });
                form.submit();
        });

        $("#clear_btn").click(function(){
          $("#MODE").attr({value:"init"});
          var form = $("#MENU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHISETSU_KAIGOKIROKU/cgi-bin/KAIGOJISSEKI_ICHIRAN_HYOJI.CGI"
          });
                form.submit();
        });

      $("#hainyo_shurui").change(function(){
        var nyunoryo = $("#hainyo_shurui").val();
        if(nyunoryo == "6+++バルーンチューブ"){
        $("#haiben_ryo").hide();
        $("#nyoryo_tube").show();
        }else{
        $("#haiben_ryo").show();
        $("#nyoryo_tube").hide();
        }
    });

      $("#hainyo_shurui").each(function(){
        var nyunoryo = $("#hainyo_shurui").val();
        if(nyunoryo == "6+++バルーンチューブ"){
        $("#haiben_ryo").hide();
        $("#nyoryo_tube").show();
        }else{
        $("#haiben_ryo").show();
        $("#nyoryo_tube").hide();
        }
    });

        $("#delete_btn").click(function(){
          if (confirm("削除してもよろしいですか？")){
          $("#MODE").attr({value:"delete"});
          var form = $("#MENU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHISETSU_KAIGOKIROKU/cgi-bin/KAIGOJISSEKI_ICHIRAN_HYOJI.CGI"
          });
                form.submit();}
        });

	});

		$.datepicker.setDefaults({
			changeYear:false,
			changeMonth:false,
			yearRange:"c-130:c+1",
			dateFormat: 'yy/mm/dd',
	        dayNamesShort: ['日','月','火','水','木','金','土'],
            dayNamesMin: ['日','月','火','水','木','金','土']
        });


		$(function(){
			$("#text_sakuseibi").datepicker({
 				onSelect: function(dateText, inst){
					var ArrDate=dateText.split("/");
					$("#text_sakuseibi").val(ArrDate[0]+"/"+ArrDate[1]+"/"+ArrDate[2]);
                                        $("#hd_sakuseibi").val(ArrDate[0]+ArrDate[1]+ArrDate[2]);
                                        change_select_input('text_sakuseibi');
				}
			});
		});


	function Shusei(n){
          $("#MODE").attr({value:"shusei"});
	  $('#ShuseiId').val(n);
          var form = $("#MENU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHISETSU_KAIGOKIROKU/cgi-bin/KAIGOJISSEKI_ICHIRAN_HYOJI.CGI"
          });
                form.submit();
		}

           function change_select_input(mode){
                 var SHISETSU_CODE = $("#SHISETSU").val();
                 var FLOOR_CODE = $("#floor").val();
                 var UNIT_CODE = $("#unit").val();
                 var ROOM_CODE = $("#room_select").val();
                 var RIYOSHA_CODE = $("#riyosha_name").val();
                 var SAKUSEIBI = $("#hd_sakuseibi").val();
                 $.post("/E-LIFE/SHISETSU_KAIGOKIROKU/cgi-bin/KAIGOJISSEKI_ICHIRAN_HYOJI.GET_RIYOSHA.CGI",
                        { "MODE": mode,
                          "shisetsu": SHISETSU_CODE,
                          "floor": FLOOR_CODE,
                          "unit": UNIT_CODE,
                          "room": ROOM_CODE,
                          "riyosha_name": RIYOSHA_CODE ,
                          "sakuseibi": SAKUSEIBI },
                        function(data,status){
                          $("#FLOOR_GET").html(data);
                        },
                        "html"
                       );
               }
		function validationCheck() {
			var message = "";
			//登録対象データ存在チェック
		//	message += registNoData();
			if (message == "") {
				message += idealValidateCheck($(".well").find("input[type='number']:visible").not("[disabled='disabled']"), true);
				//必須チェック
				message += requiredCheck();
				//時間入れ子チェック
				message += validateTime();
				//textareaのバイト数チェック
				//20140410一時的にバイトチェック外し
				//message += byteCheck();
			}
			return message;
		}
		function registNoData() {
			var message = "";
			var vital = "###VITAL###";
			var moushiokuri = "###MOUSHIOKURI###";
			if (vital == "none" && moushiokuri == "none") {
				//チェックボックスがチェックされてるものを取得
				var elmChecked = $(".well").find($("input:checkbox:checked[name*='_checked']:visible")).get();
				//登録対象データ存在チェック
				var existRegistDataFlag = false;
				existRegistDataFlag = existRegistData(elmChecked);
				if (existRegistDataFlag) {
					message += msgMst.num3;
				}
			} else if (moushiokuri != "none") {
				var moushiokuriNoDataFlag = true;
				//申し送りの場合のデータ存在チェック
				var moushiokuriItem = $(".moushiokuri_zone").find("input, textarea").not(":checkbox").get();
				for (cnt=0; cnt<moushiokuriItem.length; cnt++) {
					item = $(moushiokuriItem).get(cnt);
					if ($(item).val() != "") {
						moushiokuriNoDataFlag = false;
						break;
					}
				}
				if (moushiokuriNoDataFlag) {
					message += msgMst.num2;
				}
			}
			return message;
		}
		function validateTime() {
			var message = "";
			var separator = ":";
			var vital = "###VITAL###";
			if (vital != "") {
				var sTimes = $("input[type='time'][name*='start']:visible").not("[disabled='disabled']").get();
				var eTimes = $("input[type='time'][name*='shoyo']:visible").not("[disabled='disabled']").get();
				message = checkTime(sTimes, eTimes, separator, KAIGOKANGOKIROKU_Item.num1, KAIGOKANGOKIROKU_Item.num2);
			}
			return message;
		}
		function requiredCheck() {
			var message = "";
			//開始時間
			element = $("input[type='time'][name*='start']:visible").not("[disabled='disabled']").get();
			message += isRequired(KAIGOKANGOKIROKU_Item.num1, element);
			//終了時間
			element = $("input[type='time'][name*='shoyo']:visible").not("[disabled='disabled']").get();
			message += isRequired(KAIGOKANGOKIROKU_Item.num2, element);
			//時刻
			element = $("input[type='time'][name='vital_time']:visible").not("[disabled='disabled']").get();
			message += isRequired(KAIGOKANGOKIROKU_Item.num3, element);
			return message;
		}
		function byteCheck() {
			var elms = $(".well").find("textarea:visible").not("[disabled='disabled']").get();
			return checkByteLength(elms, "def");
		}
    </script>
	<script>
    </script>

	<script>
	</script>


    <!-- Demo page code -->

    <style type="text/css">
        #line-chart {
            height:300px;
            width:800px;
            margin: 0px auto;
            margin-top: 1em;
        }
        .nowrap {
            white-space:nowrap;
        }
        select{
            position:relative;
            top:0px;
            font-size:10pt;            
        }
        input{
            position:relative;
            top:0px;            
        }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="lib/html5.js"></script>
    <![endif]-->

  </head>
