<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <title>食事実績(入居者別月間入力)</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">

    <link rel="stylesheet" type="text/css" href="/css/theme.css">
    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/jquery-ui.css" />
    <script src="/js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="/js/jquery-ui.js"></script>
    <script src="/js/jquery.ui.datepicker-ja.js"></script>

    <script>


        shokujiMenuMorning=[
<!--   menu_select_morning       -->
            {"id":"%1","name":"%2","shurui":"%3","nyukyosha_price":"%4","guest1_price":"%5","guest2_price":"%6","staff_price":"%7","color":"%8","nyukyosha_zeikomi_price":"%9","guest1_zeikomi_price":"%10","guest2_zeikomi_price":"%11","staff_zeikomi_price":"%12"},
<!--   menu_select_morning       -->
        ];

        shokujiMenuLunch=[
<!--   menu_select_lunch       -->
            {"id":"%1","name":"%2","shurui":"%3","nyukyosha_price":"%4","guest1_price":"%5","guest2_price":"%6","staff_price":"%7","color":"%8","nyukyosha_zeikomi_price":"%9","guest1_zeikomi_price":"%10","guest2_zeikomi_price":"%11","staff_zeikomi_price":"%12"},
<!--   menu_select_lunch       -->
        ];

        shokujiMenuDinner=[
<!--   menu_select_dinner       -->
            {"id":"%1","name":"%2","shurui":"%3","nyukyosha_price":"%4","guest1_price":"%5","guest2_price":"%6","staff_price":"%7","color":"%8","nyukyosha_zeikomi_price":"%9","guest1_zeikomi_price":"%10","guest2_zeikomi_price":"%11","staff_zeikomi_price":"%12"},
<!--   menu_select_dinner       -->
        ];

        shokujiMenuBreak=[
<!--   menu_select_break       -->
            {"id":"%1","name":"%2","shurui":"%3","nyukyosha_price":"%4","guest1_price":"%5","guest2_price":"%6","staff_price":"%7","color":"%8","nyukyosha_zeikomi_price":"%9","guest1_zeikomi_price":"%10","guest2_zeikomi_price":"%11","staff_zeikomi_price":"%12"},
<!--   menu_select_break       -->
        ];

        shokujishurui=[
<!--   shokushu_select         -->
             {"id":"%1","name":"%2"},
<!--   shokushu_select         -->
        ];

        shokujidata=[
<!--  ###SHOKUJI_RECORD### -->
            {"nengappi":"%1","shokujiid":"%2","shokuji":"%3","menuid":"%4","menu":"%5","color":"%6","price":"%7","suuryou":"%8","taishousha":"%9","shokushu":"%10"},
<!--  ###SHOKUJI_RECORD### -->
        ];

        var dataShokujiIDArr=new Array();
        var dataNengappiArr=new Array();
        var dataShokujiArr=new Array();
        var dataShokushuArr=new Array();
        var dataTaishoushaArr=new Array();
        var dataMenuArr=new Array();
        var dataSuuryouArr=new Array();
        var dataKesshokuNengappiArr=new Array();
        var dataKesshokuShokujiArr=new Array();
        var morningHTML="";
        var lunchHTML="";
        var dinnerHTML="";
        var breakHTML="";
        var shokujiNum=0;
        var kakuteiCheck="0";
        var inputShokujiNum=0;
        var ikkatsuflg="0";


         window.onload = function(){
               var shokujinom = $("#Shokuji").val()
               sakujyo_select(shokujinom);
                }


	$(document).ready(function() {

            if(shokujidata.length>0) {
                for (s in shokujidata) {
                   if(shokujidata[s].shokujiid!="0"&&shokujidata[s].shokujiid!="_"&&shokujidata[s].shokujiid!="00000") {
                     dataShokujiIDArr.push(shokujidata[s].shokujiid);
                     dataNengappiArr.push(shokujidata[s].nengappi);
                     dataShokujiArr.push(shokujidata[s].shokuji);
                     dataMenuArr.push(shokujidata[s].menuid);
                     dataSuuryouArr.push(shokujidata[s].suuryou);
                     dataTaishoushaArr.push(shokujidata[s].taishousha);
                     dataShokushuArr.push(shokujidata[s].shokushu);
//                    if(shokujidata[s].shokuji=="1"){
//                       asamenushurui="_";
//                       for(m in shokujiMenuMorning) {
//                          if(shokujiMenuMorning[m].id==shokujidata[s].menuid){
//                             asamenushurui=shokujiMenuMorning[m].shurui;
//                             break;
//                          }
//                       }
//                       dataShokushuArr.push(asamenushurui);
//                    } else if(shokujidata[s].shokuji=="2") {
//                       hirumenushurui="_";
//                       for(m in shokujiMenuLunch) {
//                          if(shokujiMenuLunch[m].id==shokujidata[s].menuid){
//                             hirumenushurui=shokujiMenuLunch[m].shurui;
//                          }
//                       }
//                       dataShokushuArr.push(hirumenushurui);
//                    } else if(shokujidata[s].shokuji=="3") {
//                       yorumenushurui="_";
//                       for(m in shokujiMenuDinner) {
//                          if(shokujiMenuDinner[m].id==shokujidata[s].menuid){
//                             yorumenushurui=shokujiMenuDinner[m].shurui;
//                          }
//                       }
//                       dataShokushuArr.push(yorumenushurui);
//                    } else if(shokujidata[s].shokuji=="4") {
//                       oyatsumenushurui="_";
//                       for(m in shokujiMenuBreak) {
//                          if(shokujiMenuBreak[m].id==shokujidata[s].menuid){
//                             oyatsumenushurui=shokujiMenuBreak[m].shurui;
//                             break;
//                          }
//                       }
//                       dataShokushuArr.push(oyatsumenushurui);
//                    }
                     shokujiNum++;
                   } else if(shokujidata[s].shokujiid=="00000") {
                     dataKesshokuNengappiArr.push(shokujidata[s].nengappi);
                     dataKesshokuShokujiArr.push(shokujidata[s].shokuji);
                   }
                }
                dispShokusu();
            }

        $(".send").click(function() {
            var shokuji = $("#Shokuji").val();
            var shokushu = $("#Shokushu").val();
            var menu = $("#Menu").val();
            var taishousha = $("#Taishousha").val();
            $("#KENSAKU_FORM [name=SELECTShokuji]").val(shokuji);
            $("#KENSAKU_FORM [name=SELECTShokushu]").val(shokushu);
            $("#KENSAKU_FORM [name=SELECTMenu]").val(menu);
            $("#KENSAKU_FORM [name=SELECTTaishousha]").val(taishousha);

          $("button").each(function() {
            $(this).attr("disabled", true);
          });

            $("#Shokuji").attr("disabled", true);
            $("#Shokushu").attr("disabled", true);
            $("#Menu").attr("disabled", true);
            $("#Taishousha").attr("disabled", true);
            $("#Suuryou").attr("readonly", true);
        });

                $.datepicker.setDefaults({
                        changeYear:true,
                        changeMonth:true,
                        yearRange:"c-130:c+1",
                        dateFormat: 'yy/mm/dd',
                dayNamesShort: ['日','月','火','水','木','金','土'],
            dayNamesMin: ['日','月','火','水','木','金','土']
        });

                $(function(){
                        $("#Taishoubi").datepicker();
                    });

      function tsuikaMorning(mid) {
             morningHTML+='<tr>';
             morningHTML+='<td style="text-align:left; width:90px;">';
             morningHTML+='<select id="Shokushu'+mid+'" name="Shokushu'+mid+'" class="MorningShokushu" style="width:90px;">';
             morningHTML+='<option value=""></option>';
             morningHTML+='</select>';
             morningHTML+='</td>';
             morningHTML+='<td style="width:120px">';
             morningHTML+='<select id="Menu'+mid+'" name="Menu'+mid+'" class="MorningMenu" style="width:120px;">';
             morningHTML+='<option value=""></option>';
             morningHTML+='</select>';
             morningHTML+='</td>';
             morningHTML+='<td style="width:140px;">';
             morningHTML+='<select id="Taishousha'+mid+'" name="Taishousha'+mid+'" class="MorningTaishousha" style="width:140px;">';
             morningHTML+='<option value=""></option>';
             morningHTML+='</select>';
             morningHTML+='</td>';
             morningHTML+='<td style="text-align:left;width:40px;">';
             morningHTML+='<input id="Suuryou'+mid+'" name="Suuryou'+mid+'" class="clsSuuryou" style="width:40px; text-align:right" type="number" min="1" value="1" /><input id="shokujiid'+mid+'" name="shokujiid'+mid+'" type="hidden" value=""><input type="hidden" id="Shokuji'+mid+'" name="Shokuji'+mid+'" value="1">';
             morningHTML+='</td>';
             morningHTML+='<td></td>';
             morningHTML+='</tr>';
             $('#MorningMenuNyuuryokuTbl').append(morningHTML);
             morningHTML="";
             setShokushu(mid);
       }

       function tsuikaLunch(lid) {
             lunchHTML+='<tr>';
             lunchHTML+='<td style="text-align:left; width:90px;">';
             lunchHTML+='<select id="Shokushu'+lid+'" name="Shokushu'+lid+'" class="LunchShokushu" style="width:90px;">';
             lunchHTML+='<option value=""></option>';
             lunchHTML+='</select>';
             lunchHTML+='</td>';
             lunchHTML+='<td style="width:120px">';
             lunchHTML+='<select id="Menu'+lid+'" name="Menu'+lid+'" class="LunchMenu" style="width:120px;">';
             lunchHTML+='<option value=""></option>';
             lunchHTML+='</select>';
             lunchHTML+='</td>';
             lunchHTML+='<td style="width:140px;">';
             lunchHTML+='<select id="Taishousha'+lid+'" name="Taishousha'+lid+'" class="LunchTaishousha" style="width:140px;">';
             lunchHTML+='<option value=""></option>';
             lunchHTML+='</select>';
             lunchHTML+='</td>';
             lunchHTML+='<td style="text-align:left;width:40px;">';
             lunchHTML+='<input id="Suuryou'+lid+'" name="Suuryou'+lid+'" class="clsSuuryou" style="width:40px; text-align:right" type="number" min="1" value="1" /><input id="shokujiid'+lid+'" name="shokujiid'+lid+'" type="hidden" value=""><input type="hidden" id="Shokuji'+lid+'" name="Shokuji'+lid+'" value="2">';
             lunchHTML+='</td>';
             lunchHTML+='<td></td>';
             lunchHTML+='</tr>';
             $('#LunchMenuNyuuryokuTbl').append(lunchHTML);
             lunchHTML="";
             setShokushu(lid);
       }

       function tsuikaDinner(did) {
             dinnerHTML+='<tr>';
             dinnerHTML+='<td style="text-align:left; width:90px;">';
             dinnerHTML+='<select id="Shokushu'+did+'" name="Shokushu'+did+'" class="DinnerShokushu" style="width:90px;">';
             dinnerHTML+='<option value=""></option>';
             dinnerHTML+='</select>';
             dinnerHTML+='</td>';
             dinnerHTML+='<td style="width:120px">';
             dinnerHTML+='<select id="Menu'+did+'" name="Menu'+did+'" class="DinnerMenu" style="width:120px;">';
             dinnerHTML+='<option value=""></option>';
             dinnerHTML+='</select>';
             dinnerHTML+='</td>';
             dinnerHTML+='<td style="width:140px;">';
             dinnerHTML+='<select id="Taishousha'+did+'" name="Taishousha'+did+'" class="DinnerTaishousha" style="width:140px;">';
             dinnerHTML+='<option value=""></option>';
             dinnerHTML+='</select>';
             dinnerHTML+='</td>';
             dinnerHTML+='<td style="text-align:left;width:40px;">';
             dinnerHTML+='<input id="Suuryou'+did+'" name="Suuryou'+did+'" class="clsSuuryou" style="width:40px; text-align:right" type="number" min="1" value="1" /><input id="shokujiid'+did+'" name="shokujiid'+did+'" type="hidden" value=""><input type="hidden" id="Shokuji'+did+'" name="Shokuji'+did+'" value="3">';
             dinnerHTML+='</td>';
             dinnerHTML+='<td></td>';
             dinnerHTML+='</tr>';
             $('#DinnerMenuNyuuryokuTbl').append(dinnerHTML);
             dinnerHTML="";
             setShokushu(did);
       }

       function tsuikaBreak(bid) {
             breakHTML+='<tr>';
             breakHTML+='<td style="text-align:left; width:90px;">';
             breakHTML+='<select id="Shokushu'+bid+'" name="Shokushu'+bid+'" class="BreakShokushu" style="width:90px;">';
             breakHTML+='<option value=""></option>';
             breakHTML+='</select>';
             breakHTML+='</td>';
             breakHTML+='<td style="width:120px">';
             breakHTML+='<select id="Menu'+bid+'" name="Menu'+bid+'" class="BreakMenu" style="width:120px;">';
             breakHTML+='<option value=""></option>';
             breakHTML+='</select>';
             breakHTML+='</td>';
             breakHTML+='<td style="width:140px;">';
             breakHTML+='<select id="Taishousha'+bid+'" name="Taishousha'+bid+'" class="BreakTaishousha" style="width:140px;">';
             breakHTML+='<option value=""></option>';
             breakHTML+='</select>';
             breakHTML+='</td>';
             breakHTML+='<td style="text-align:left;width:40px;">';
             breakHTML+='<input id="Suuryou'+bid+'" name="Suuryou'+bid+'" class="clsSuuryou" style="width:40px; text-align:right" type="number" min="1" value="1" /><input id="shokujiid'+bid+'" name="shokujiid'+bid+'" type="hidden" value=""><input type="hidden" id="Shokuji'+bid+'" name="Shokuji'+bid+'" value="4">';
             breakHTML+='</td>';
             breakHTML+='<td></td>';
             breakHTML+='</tr>';
             $('#BreakMenuNyuuryokuTbl').append(breakHTML);
             breakHTML="";
             setShokushu(bid);
       }

       function setMorningHTMLHeader() {
             morningHTML+='<tr>';
             morningHTML+='<td align="center" colspan="4">';
             morningHTML+='<button type="button" class="btn btn-pink" id="morningTsuika" style="margin-bottom:5px; display:###TOUROKUDISP###" ###SAKUJYO###><i class="icon-plus"></i> 追加';
             morningHTML+='</button>';
             morningHTML+='</td>';
             morningHTML+='</tr>';
             morningHTML+='<tr>';
             morningHTML+='<td style="text-align:center; width:90px;">食種</td>';
             morningHTML+='<td style="text-align:center; width:120px">メニュー</td>';
             morningHTML+='<td style="text-align:center; width:140px">対象者</td>';
             morningHTML+='<td style="text-align:center; width:40px;">数量</td>';
             morningHTML+='</tr>';
             $('#MorningMenuNyuuryokuTbl').append(morningHTML);
             morningHTML="";
       }

       function setLunchHTMLHeader() {
             lunchHTML+='<tr>';
             lunchHTML+='<td align="center" colspan="4">';
             lunchHTML+='<button type="button" class="btn btn-pink" id="lunchTsuika" style="margin-bottom:5px; display:###TOUROKUDISP###" ###SAKUJYO###><i class="icon-plus"></i> 追加';
             lunchHTML+='</button>';
             lunchHTML+='</td>';
             lunchHTML+='</tr>';
             lunchHTML+='<tr>';
             lunchHTML+='<td style="text-align:center; width:90px;">食種</td>';
             lunchHTML+='<td style="text-align:center; width:120px">メニュー</td>';
             lunchHTML+='<td style="text-align:center; width:140px">対象者</td>';
             lunchHTML+='<td style="text-align:center; width:40px;">数量</td>';
             lunchHTML+='</tr>';
             $('#LunchMenuNyuuryokuTbl').append(lunchHTML);
             lunchHTML="";
       }

       function setDinnerHTMLHeader() {
             dinnerHTML+='<tr>';
             dinnerHTML+='<td align="center" colspan="4">';
             dinnerHTML+='<button type="button" class="btn btn-pink" id="dinnerTsuika" style="margin-bottom:5px; display:###TOUROKUDISP###" ###SAKUJYO###><i class="icon-plus"></i> 追加';
             dinnerHTML+='</button>';
             dinnerHTML+='</td>';
             dinnerHTML+='</tr>';
             dinnerHTML+='<tr>';
             dinnerHTML+='<td style="text-align:center; width:90px;">食種</td>';
             dinnerHTML+='<td style="text-align:center; width:120px">メニュー</td>';
             dinnerHTML+='<td style="text-align:center; width:140px">対象者</td>';
             dinnerHTML+='<td style="text-align:center; width:40px;">数量</td>';
             dinnerHTML+='</tr>';
             $('#DinnerMenuNyuuryokuTbl').append(dinnerHTML);
             dinnerHTML="";
       }

       function setBreakHTMLHeader() {
             breakHTML+='<tr>';
             breakHTML+='<td align="center" colspan="4">';
             breakHTML+='<button type="button" class="btn btn-pink" id="breakTsuika" style="margin-bottom:5px; display:###TOUROKUDISP###" ###SAKUJYO###><i class="icon-plus"></i> 追加';
             breakHTML+='</button>';
             breakHTML+='</td>';
             breakHTML+='</tr>';
             breakHTML+='<tr>';
             breakHTML+='<td style="text-align:center; width:90px;">食種</td>';
             breakHTML+='<td style="text-align:center; width:120px">メニュー</td>';
             breakHTML+='<td style="text-align:center; width:140px">対象者</td>';
             breakHTML+='<td style="text-align:center; width:40px;">数量</td>';
             breakHTML+='</tr>';
             $('#BreakMenuNyuuryokuTbl').append(breakHTML);
             breakHTML="";
       }

       function setMorningMenu(id) {
             if(shokujiMenuMorning.length>0) {
                for(m=0;m<shokujiMenuMorning.length;m++) {
                  if($('#Shokushu'+id).val()==shokujiMenuMorning[m].shurui) {
                   $('#Menu'+id).append('<option value="'+shokujiMenuMorning[m].id+'">'+shokujiMenuMorning[m].name+'</option>');
                  }
                }
             }
       }

       function setLunchMenu(id) {
             if(shokujiMenuLunch.length>0) {
                for(m=0;m<shokujiMenuLunch.length;m++) {
                  if($('#Shokushu'+id).val()==shokujiMenuLunch[m].shurui) {
                   $('#Menu'+id).append('<option value="'+shokujiMenuLunch[m].id+'">'+shokujiMenuLunch[m].name+'</option>');
                  }
                }
             }
       }

       function setDinnerMenu(id) {
             if(shokujiMenuDinner.length>0) {
                for(m=0;m<shokujiMenuDinner.length;m++) {
                  if($('#Shokushu'+id).val()==shokujiMenuDinner[m].shurui) {
                   $('#Menu'+id).append('<option value="'+shokujiMenuDinner[m].id+'">'+shokujiMenuDinner[m].name+'</option>');
                  }
                }
             }
       }

       function setBreakMenu(id) {
             if(shokujiMenuBreak.length>0) {
                for(m=0;m<shokujiMenuBreak.length;m++) {
                  if($('#Shokushu'+id).val()==shokujiMenuBreak[m].shurui) {
                   $('#Menu'+id).append('<option value="'+shokujiMenuBreak[m].id+'">'+shokujiMenuBreak[m].name+'</option>');
                  }
                }
             }
       }

       function setShokushu(id) {
             if(shokujishurui.length>0) {
                for(s=0;s<shokujishurui.length;s++) {
                   $('#Shokushu'+id).append('<option value="'+shokujishurui[s].id+'">'+shokujishurui[s].name+'</option>');
                }
             }
       }

       function dispShokusu() {
             var shokusuNum=0;
             for(n in dataSuuryouArr) {
                inputMenu=dataMenuArr[n];
                inputID=dataShokujiIDArr[n];
                if(inputMenu!="_"&&inputID!="00000"){
                   shokusuNum=shokusuNum+parseInt(dataSuuryouArr[n]);
                }
             }
             $('#spnShokusu').text(shokusuNum+"食");
       }

       $('.MorningShokushu').live('change',function(){
             var menuidx=$('.MorningShokushu').index(this);
             var noAddFlg="0";
             if($('.MorningMenu').eq(menuidx).val()!="") {
                noAddFlg="1";
             }
             if($('.MorningShokushu').eq(menuidx).val()=="") {
                noAddFlg="1";
             }
             $('.MorningMenu').eq(menuidx).children().remove();
             $('.MorningTaishousha').eq(menuidx).children().remove();
             var matchcount=0;
             kakuteiCheck="0";
             for(m in shokujiMenuMorning) {
                 if(shokujiMenuMorning[m].shurui==$('.MorningShokushu').eq(menuidx).val()) {
                     matchcount++;
                     $('.MorningMenu').eq(menuidx).append('<option value="'+shokujiMenuMorning[m].id+'">'+shokujiMenuMorning[m].name+'</option>');
                     if(matchcount==1) {
//                        if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                          $('.MorningTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuMorning[m].nyukyosha_price+'円</option>');
                          $('.MorningTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuMorning[m].guest1_price+'円</option>');
                          $('.MorningTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuMorning[m].guest2_price+'円</option>');
//                        } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                          $('.MorningTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuMorning[m].staff_price+'円</option>');
//                        }
                      }
                 }
             }

             if(noAddFlg=="0") {
                var kesshokuCheck="0";
                var kesshokuShokujiM="";
                if(dataKesshokuNengappiArr.length>0) {
                  for(k in dataKesshokuNengappiArr) {
                    if(dataKesshokuNengappiArr[k]==$('#TAISHOUBI').val()){
                      kesshokuCheck="1";
                      if(dataKesshokuShokujiArr[k]=="1"){
                         kesshokuShokujiM="1"
                      }
                    }
                  }
                }

                if(kesshokuCheck=="0"||kesshokuShokujiM=="") {
                    if($('#TAISHOUBI').val()!="") {
                       tsuikaMorning(shokujiNum);
                       setMorningMenu(shokujiNum);
                       $('#shokujiid'+shokujiNum).val("@");
                       shokujiNum++;
                    } else {
                       tsuikaMorning(inputShokujiNum);
                       setMorningMenu(inputShokujiNum);
                       $('#shokujiid'+inputShokujiNum).val("@");
                       inputShokujiNum++;
                    }
                }
             }
       });

       $('.MorningMenu').live('change',function(){
             var menuidx=$('.MorningMenu').index(this);
             $('.MorningTaishousha').eq(menuidx).children().remove();
             kakuteiCheck="0";
             for(m in shokujiMenuMorning) {
                 if(shokujiMenuMorning[m].id==$('.MorningMenu').eq(menuidx).val()) {
//                    if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                      $('.MorningTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuMorning[m].nyukyosha_price+'円</option>');
                      $('.MorningTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuMorning[m].guest1_price+'円</option>');
                      $('.MorningTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuMorning[m].guest2_price+'円</option>');
//                    } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                      $('.MorningTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuMorning[m].staff_price+'円</option>');
//                    }
                 }
             }
       });

       $('.LunchShokushu').live('change',function(){
             var menuidx=$('.LunchShokushu').index(this);
             var noAddFlg="0";
             if($('.LunchMenu').eq(menuidx).val()!="") {
                noAddFlg="1";
             }
             if($('.LunchShokushu').eq(menuidx).val()=="") {
                noAddFlg="1";
             }
             $('.LunchMenu').eq(menuidx).children().remove();
             $('.LunchTaishousha').eq(menuidx).children().remove();
             var matchcount=0;
             kakuteiCheck="0";
             for(m in shokujiMenuLunch) {
                 if(shokujiMenuLunch[m].shurui==$('.LunchShokushu').eq(menuidx).val()) {
                     matchcount++;
                     $('.LunchMenu').eq(menuidx).append('<option value="'+shokujiMenuLunch[m].id+'">'+shokujiMenuLunch[m].name+'</option>');
                     if(matchcount==1) {
//                        if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                          $('.LunchTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuLunch[m].nyukyosha_price+'円</option>');
                          $('.LunchTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuLunch[m].guest1_price+'円</option>');
                          $('.LunchTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuLunch[m].guest2_price+'円</option>');
//                        } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                          $('.LunchTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuLunch[m].staff_price+'円</option>');
//                        }
                      }
                 }
             }
             if(noAddFlg=="0") {
                var kesshokuCheck="0";
                var kesshokuShokujiL="";
                if(dataKesshokuNengappiArr.length>0) {
                  for(k in dataKesshokuNengappiArr) {
                    if(dataKesshokuNengappiArr[k]==$('#TAISHOUBI').val()){
                      kesshokuCheck="1";
                      if(dataKesshokuShokujiArr[k]=="2"){
                         kesshokuShokujiL="1";
                      }
                    }
                  }
                }

                if(kesshokuCheck=="0"||kesshokuShokujiL=="") {
                    if($('#TAISHOUBI').val()!="") {
                       tsuikaLunch(shokujiNum);
                       setLunchMenu(shokujiNum);
                       $('#shokujiid'+shokujiNum).val("@");
                       shokujiNum++;
                    } else {
                       tsuikaLunch(inputShokujiNum);
                       setLunchMenu(inputShokujiNum);
                       $('#shokujiid'+inputShokujiNum).val("@");
                       inputShokujiNum++;
                    }
                }
             }
       });

       $('.LunchMenu').live('change',function(){
             var menuidx=$('.LunchMenu').index(this);
             $('.LunchTaishousha').eq(menuidx).children().remove();
             kakuteiCheck="0";
             for(m in shokujiMenuLunch) {
                 if(shokujiMenuLunch[m].id==$('.LunchMenu').eq(menuidx).val()) {
//                    if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                      $('.LunchTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuLunch[m].nyukyosha_price+'円</option>');
                      $('.LunchTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuLunch[m].guest1_price+'円</option>');
                      $('.LunchTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuLunch[m].guest2_price+'円</option>');
//                    } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                      $('.LunchTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuLunch[m].staff_price+'円</option>');
//                    }
                 }
             }
       });

       $('.DinnerShokushu').live('change',function(){
             var menuidx=$('.DinnerShokushu').index(this);
             var noAddFlg="0";
             if($('.DinnerMenu').eq(menuidx).val()!="") {
                noAddFlg="1";
             }
             if($('.DinnerShokushu').eq(menuidx).val()=="") {
                noAddFlg="1";
             }
             $('.DinnerMenu').eq(menuidx).children().remove();
             $('.DinnerTaishousha').eq(menuidx).children().remove();
             var matchcount=0;
             kakuteiCheck="0";
             for(m in shokujiMenuDinner) {
                 if(shokujiMenuDinner[m].shurui==$('.DinnerShokushu').eq(menuidx).val()) {
                     matchcount++;
                     $('.DinnerMenu').eq(menuidx).append('<option value="'+shokujiMenuDinner[m].id+'">'+shokujiMenuDinner[m].name+'</option>');
                     if(matchcount==1) {
//                        if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                          $('.DinnerTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuDinner[m].nyukyosha_price+'円</option>');
                          $('.DinnerTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuDinner[m].guest1_price+'円</option>');
                          $('.DinnerTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuDinner[m].guest2_price+'円</option>');
//                        } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                          $('.DinnerTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuDinner[m].staff_price+'円</option>');
//                        }
                      }
                 }
             }
             if(noAddFlg=="0") {
                var kesshokuCheck="0";
                var kesshokuShokujiD="";
                if(dataKesshokuNengappiArr.length>0) {
                  for(k in dataKesshokuNengappiArr) {
                    if(dataKesshokuNengappiArr[k]==$('#TAISHOUBI').val()){
                      kesshokuCheck="1";
                      if(dataKesshokuShokujiArr[k]=="3"){
                         kesshokuShokujiD="1";
                      }
                    }
                  }
                }

                if(kesshokuCheck=="0"||kesshokuShokujiD=="") {
                    if($('#TAISHOUBI').val()!="") {
                       tsuikaDinner(shokujiNum);
                       setDinnerMenu(shokujiNum);
                       $('#shokujiid'+shokujiNum).val("@");
                       shokujiNum++;
                    } else {
                       tsuikaDinner(inputShokujiNum);
                       setDinnerMenu(inputShokujiNum);
                       $('#shokujiid'+inputShokujiNum).val("@");
                       inputShokujiNum++;
                    }
                }
            }
       });

       $('.DinnerMenu').live('change',function(){
             var menuidx=$('.DinnerMenu').index(this);
             $('.DinnerTaishousha').eq(menuidx).children().remove();
             kakuteiCheck="0";
             for(m in shokujiMenuDinner) {
                 if(shokujiMenuDinner[m].id==$('.DinnerMenu').eq(menuidx).val()) {
//                    if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                      $('.DinnerTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuDinner[m].nyukyosha_price+'円</option>');
                      $('.DinnerTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuDinner[m].guest1_price+'円</option>');
                      $('.DinnerTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuDinner[m].guest2_price+'円</option>');
//                    } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                      $('.DinnerTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuDinner[m].staff_price+'円</option>');
//                    }
                 }
             }
       });

       $('.BreakShokushu').live('change',function(){
             var menuidx=$('.BreakShokushu').index(this);
             var noAddFlg="0";
             if($('.BreakMenu').eq(menuidx).val()!="") {
                noAddFlg="1";
             }
             if($('.BreakShokushu').eq(menuidx).val()=="") {
                noAddFlg="1";
             }
             $('.BreakMenu').eq(menuidx).children().remove();
             $('.BreakTaishousha').eq(menuidx).children().remove();
             var matchcount=0;
             kakuteiCheck="0";
             for(m in shokujiMenuBreak) {
                 if(shokujiMenuBreak[m].shurui==$('.BreakShokushu').eq(menuidx).val()) {
                     matchcount++;
                     $('.BreakMenu').eq(menuidx).append('<option value="'+shokujiMenuBreak[m].id+'">'+shokujiMenuBreak[m].name+'</option>');
                     if(matchcount==1) {
//                        if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                          $('.BreakTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuBreak[m].nyukyosha_price+'円</option>');
                          $('.BreakTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuBreak[m].guest1_price+'円</option>');
                          $('.BreakTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuBreak[m].guest2_price+'円</option>');
//                        } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                          $('.BreakTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuBreak[m].staff_price+'円</option>');
//                        }
                      }
                 }
             }
             if(noAddFlg=="0") {
                var kesshokuCheck="0";
                var kesshokuShokujiB="";
                if(dataKesshokuNengappiArr.length>0) {
                  for(k in dataKesshokuNengappiArr) {
                    if(dataKesshokuNengappiArr[k]==$('#TAISHOUBI').val()){
                      kesshokuCheck="1";
                      if(dataKesshokuShokujiArr[k]=="4"){
                          kesshokuShokujiB="1";
                      }
                    }
                  }
                }

                if(kesshokuCheck=="0"||kesshokuShokujiB=="") {
                    if($('#TAISHOUBI').val()!="") {
                       tsuikaBreak(shokujiNum);
                       setBreakMenu(shokujiNum);
                       $('#shokujiid'+shokujiNum).val("@");
                       shokujiNum++;
                    } else {
                       tsuikaBreak(inputShokujiNum);
                       setBreakMenu(inputShokujiNum);
                       $('#shokujiid'+inputShokujiNum).val("@");
                       inputShokujiNum++;
                    }
                }
             }
       });

       $('.BreakMenu').live('change',function(){
             var menuidx=$('.BreakMenu').index(this);
             $('.BreakTaishousha').eq(menuidx).children().remove();
             kakuteiCheck="0";
             for(m in shokujiMenuBreak) {
                 if(shokujiMenuBreak[m].id==$('.BreakMenu').eq(menuidx).val()) {
//                    if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                      $('.BreakTaishousha').eq(menuidx).append('<option value="1">入居者:'+shokujiMenuBreak[m].nyukyosha_price+'円</option>');
                      $('.BreakTaishousha').eq(menuidx).append('<option value="2">ゲスト１:'+shokujiMenuBreak[m].guest1_price+'円</option>');
                      $('.BreakTaishousha').eq(menuidx).append('<option value="3">ゲスト２:'+shokujiMenuBreak[m].guest2_price+'円</option>');
//                    } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                      $('.BreakTaishousha').eq(menuidx).append('<option value="4">スタッフ:'+shokujiMenuBreak[m].staff_price+'円</option>');
//                    }
                 }
             }
       });

       $('.clsSuuryou').live('change',function(){
           kakuteiCheck="0";
       });

       $('.chkTaishoubi').live('click',function(){
          $('#TAISHOUBI').val('');
          $('.listTaishoubi').each(function(){
             $(this).css('background-color','white');
          });
          $('#MorningMenuNyuuryokuTbl').children().remove();
          $('#LunchMenuNyuuryokuTbl').children().remove();
          $('#DinnerMenuNyuuryokuTbl').children().remove();
          $('#BreakMenuNyuuryokuTbl').children().remove();

          inputShokujiNum=0;

          tsuikaMorning(inputShokujiNum);
          setMorningMenu(inputShokujiNum);
          $('#shokujiid'+inputShokujiNum).val("@");
          inputShokujiNum++;

          tsuikaLunch(inputShokujiNum);
          setLunchMenu(inputShokujiNum);
          $('#shokujiid'+inputShokujiNum).val("@");
          inputShokujiNum++;

          tsuikaDinner(inputShokujiNum);
          setDinnerMenu(inputShokujiNum);
          $('#shokujiid'+inputShokujiNum).val("@");
          inputShokujiNum++;

          tsuikaBreak(inputShokujiNum);
          setBreakMenu(inputShokujiNum);
          $('#shokujiid'+inputShokujiNum).val("@");
          inputShokujiNum++;
       });

       $('#kakutei').click(function(){
        ikkatsuflg="0";
        $('.chkTaishoubi').each(function(){
           if($(this).prop('checked')) {
              ikkatsuflg="1";
           }
        });

        if(ikkatsuflg=="0") {
           var selTaishoubi;
           var html1="";
           var html2="";
           var html3="";
           var html4="";
           kakuteiCheck="1";
           for(n=0;n<shokujiNum;n++) {
              inputShokushu=$('#Shokushu'+n).val();
              inputMenu=$('#Menu'+n).val();
              inputTaishousha=$('#Taishousha'+n).val();
              inputSuuryou=$('#Suuryou'+n).val();
              inputShokuji=$('#Shokuji'+n).val();
              if(!inputShokushu || inputShokushu=="") {
                 inputShokushu="_";
              }
              if(!inputMenu || inputMenu=="") {
                 inputMenu="_";
              }
              if(!inputTaishousha || inputTaishousha=="") {
                 inputTaishousha="_";
              }
              if(!inputSuuryou || inputSuuryou=="") {
                 inputSuuryou="_";
              }
              if(!inputShokuji || inputShokuji=="") {
                 inputShokuji="_";
              }
              if(!$('#TAISHOUBI').val()||$('#TAISHOUBI').val()==""){
                  alert("対象日が選択されていません。");
                  return false;
              }
              if($('#shokujiid'+n).val()=="@"){
                dataShokujiIDArr.push("_");
                dataNengappiArr.push($('#TAISHOUBI').val());
                dataShokujiArr.push(inputShokuji);
                dataShokushuArr.push(inputShokushu);
                dataMenuArr.push(inputMenu);
                dataTaishoushaArr.push(inputTaishousha);
                dataSuuryouArr.push(inputSuuryou);
                $('#shokujiid'+n).val("_");
                selTaishoubi=$('#TAISHOUBI').val();
              } else if($('#shokujiid'+n).val()) {
                dataShokujiIDArr.splice(n,1,$('#shokujiid'+n).val());
                dataNengappiArr.splice(n,1,$('#TAISHOUBI').val());
                dataShokujiArr.splice(n,1,inputShokuji);
                dataShokushuArr.splice(n,1,inputShokushu);
                dataMenuArr.splice(n,1,inputMenu);
                dataTaishoushaArr.splice(n,1,inputTaishousha);
                dataSuuryouArr.splice(n,1,inputSuuryou);
                selTaishoubi=$('#TAISHOUBI').val();
              }
           }
           shokujiArrNum=dataShokujiIDArr.length;
           for(s=0;s<shokujiArrNum;s++) {
             if(dataNengappiArr[s]==selTaishoubi){
              if(dataShokujiArr[s]=="1") {
                 for(m in shokujiMenuMorning) {
                   if(dataMenuArr[s]==shokujiMenuMorning[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'">'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br/>';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'"><b>★ゲスト１'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'"><b>★ゲスト２'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'">'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />' ;
                      }
                   }
                 }
              } else if(dataShokujiArr[s]=="2") {
                 for(m in shokujiMenuLunch) {
                   if(dataMenuArr[s]==shokujiMenuLunch[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'">'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'"><b>★ゲスト１'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span/b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'"><b>★ゲスト２'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span/b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'">'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      }
                   }
                 }
              } else if(dataShokujiArr[s]=="3") {
                 for(m in shokujiMenuDinner) {
                   if(dataMenuArr[s]==shokujiMenuDinner[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'">'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'"><b>★ゲスト１'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</sn></b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'"><b>★ゲスト２'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</sn></b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'">'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      }
                   }
                 }
              } else if(dataShokujiArr[s]=="4") {
                 for(m in shokujiMenuBreak) {
                   if(dataMenuArr[s]==shokujiMenuBreak[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'">'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'"><b>★ゲスト１'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span/b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'"><b>★ゲスト２'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span/b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'">'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      }
                   }
                 }
              }
            }
           }
           kflg="0";
           kesshokuM="";
           kesshokuL="";
           kesshokuD="";
           kesshokuB="";
           for( k in dataKesshokuNengappiArr) {
              if(selTaishoubi==dataKesshokuNengappiArr[k]) {
                 kflg="1";
                 if(dataKesshokuShokujiArr[k]=="4"){
                    kesshokuB="1";
                 } else if(dataKesshokuShokujiArr[k]=="3") {
                    kesshokuD="1";
                 } else if(dataKesshokuShokujiArr[k]=="2") {
                    kesshokuL="1";
                 } else {
                    kesshokuM="1";
                 }
              }
           }
           if(kesshokuM==""){
              $('#td1'+selTaishoubi).html(html1);
           }
           if(kesshokuL==""){
              $('#td2'+selTaishoubi).html(html2);
           }
           if(kesshokuD==""){
              $('#td3'+selTaishoubi).html(html3);
           }
           if(kesshokuB==""){
              $('#td4'+selTaishoubi).html(html4);
           }
           dispShokusu();
        } else {
           var selTaishoubi;
           kakuteiCheck="1";
           $(".chkTaishoubi").each(function(){
            if($(this).prop('checked')){
             for(n=0;n<inputShokujiNum;n++) {
              inputShokushu=$('#Shokushu'+n).val();
              inputMenu=$('#Menu'+n).val();
              inputTaishousha=$('#Taishousha'+n).val();
              inputSuuryou=$('#Suuryou'+n).val();
              inputShokuji=$('#Shokuji'+n).val();
              if(!inputShokushu || inputShokushu=="") {
                 inputShokushu="_";
              }
              if(!inputMenu || inputMenu=="") {
                 inputMenu="_";
              }
              if(!inputTaishousha || inputTaishousha=="") {
                 inputTaishousha="_";
              }
              if(!inputSuuryou || inputSuuryou=="") {
                 inputSuuryou="_";
              }
              if(!inputShokuji || inputShokuji=="") {
                 inputShokuji="_";
              }
              selTaishoubi=$(this).attr('value');
              kflg="0";
              for( k in dataKesshokuNengappiArr) {
                 if(selTaishoubi==dataKesshokuNengappiArr[k]) {
                    kflg="1";
                    break;
                 }
              }
              if(kflg=="0"){
                dataShokujiIDArr.push("_");
                dataNengappiArr.push(selTaishoubi);
                dataShokujiArr.push(inputShokuji);
                dataShokushuArr.push(inputShokushu);
                dataMenuArr.push(inputMenu);
                dataTaishoushaArr.push(inputTaishousha);
                dataSuuryouArr.push(inputSuuryou);
                $('#shokujiid'+n).val("_");
                shokujiNum++;
              }
             }
            }
           });
           shokujiArrNum=dataShokujiIDArr.length;
           $(".chkTaishoubi").each(function(){
             html1="";
             html2="";
             html3="";
             html4="";
            for(s=0;s<shokujiArrNum;s++) {
             selTaishoubi=$(this).attr('value');
             if(dataNengappiArr[s]==selTaishoubi){
              if(dataShokujiArr[s]=="1") {
                 for(m in shokujiMenuMorning) {
                   if(dataMenuArr[s]==shokujiMenuMorning[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'">'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'"><b>★ゲスト１'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'"><b>★ゲスト２'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html1+='<span style="color:'+shokujiMenuMorning[m].color+'">'+shokujiMenuMorning[m].name+':'+shokujiMenuMorning[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      }
                   }
                 }
              } else if(dataShokujiArr[s]=="2") {
                 for(m in shokujiMenuLunch) {
                   if(dataMenuArr[s]==shokujiMenuLunch[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'">'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'"><b>★ゲスト１'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'"><b>★ゲスト２'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html2+='<span style="color:'+shokujiMenuLunch[m].color+'">'+shokujiMenuLunch[m].name+':'+shokujiMenuLunch[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      }
                   }
                 }
              } else if(dataShokujiArr[s]=="3") {
                 for(m in shokujiMenuDinner) {
                   if(dataMenuArr[s]==shokujiMenuDinner[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'">'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'"><b>★ゲスト１'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'"><b>★ゲスト２'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html3+='<span style="color:'+shokujiMenuDinner[m].color+'">'+shokujiMenuDinner[m].name+':'+shokujiMenuDinner[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      }
                   }
                 }
              } else if(dataShokujiArr[s]=="4") {
                 for(m in shokujiMenuBreak) {
                   if(dataMenuArr[s]==shokujiMenuBreak[m].id){
                      if(dataTaishoushaArr[s]=="1") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'">'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].nyukyosha_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      } else if(dataTaishoushaArr[s]=="2") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'"><b>★ゲスト１'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].guest1_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="3") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'"><b>★ゲスト２'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].guest2_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span></b><br />';
                      } else if(dataTaishoushaArr[s]=="4") {
                         html4+='<span style="color:'+shokujiMenuBreak[m].color+'">'+shokujiMenuBreak[m].name+':'+shokujiMenuBreak[m].staff_zeikomi_price+'円×'+dataSuuryouArr[s]+'</span><br />';
                      }
                   }
                 }
              }

              k2flg="0";
              kesshokuM="";
              kesshokuL="";
              kesshokuD="";
              kesshokuB="";
              for( k in dataKesshokuNengappiArr) {
                 if(selTaishoubi==dataKesshokuNengappiArr[k]) {
                    k2flg="1";
                    if(dataKesshokuShokujiArr[k]=="4"){
                       kesshokuB="1";
                    } else if(dataKesshokuShokujiArr[k]=="3") {
                       kesshokuD="1";
                    } else if(dataKesshokuShokujiArr[k]=="2") {
                       kesshokuL="1";
                    } else {
                       kesshokuM="1";
                    }
                 }
              }
              if(kesshokuM==""){
                 $('#td1'+selTaishoubi).html(html1);
              }
              if(kesshokuL==""){
                 $('#td2'+selTaishoubi).html(html2);
              }
              if(kesshokuD==""){
                 $('#td3'+selTaishoubi).html(html3);
              }
              if(kesshokuB==""){
                 $('#td4'+selTaishoubi).html(html4);
              }
//              $('#td1'+selTaishoubi).html(html1);
//              $('#td2'+selTaishoubi).html(html2);
//              $('#td3'+selTaishoubi).html(html3);
//              $('#td4'+selTaishoubi).html(html4);
              dispShokusu();
            }
           }
          });
          $('#MorningMenuNyuuryokuTbl').children().remove();
          $('#LunchMenuNyuuryokuTbl').children().remove();
          $('#DinnerMenuNyuuryokuTbl').children().remove();
          $('#BreakMenuNyuuryokuTbl').children().remove();
        }
//        alert(dataShokujiArr.length);
       });

       $(".listTaishoubi").live('click',function(){
           $(".listTaishoubi").each(function(){
              $(this).css('background-color','white');
           });
           $(this).css('background-color','lightblue');
           selIndex=$(".listTaishoubi").index(this);
           selTaishoubi=$(".tdTaishoubi").eq(selIndex).attr('value');
           $('#TAISHOUBI').val(selTaishoubi);
           $('#MorningMenuNyuuryokuTbl').children().remove();
//           setMorningHTMLHeader();
           $('#LunchMenuNyuuryokuTbl').children().remove();
//           setLunchHTMLHeader();
           $('#DinnerMenuNyuuryokuTbl').children().remove();
//           setDinnerHTMLHeader();
           $('#BreakMenuNyuuryokuTbl').children().remove();
//           setBreakHTMLHeader();
           dataMorningFlg="0";
           dataLunchFlg="0";
           dataDinnerFlg="0";
           dataBreakFlg="0";
           for ( d in dataShokujiArr) {
              if(selTaishoubi==dataNengappiArr[d]) {
                    if(dataShokujiArr[d]=="1") {
                      tsuikaMorning(d);
                      $('#Shokushu'+d).val(dataShokushuArr[d]);
                      setMorningMenu(d);
                      $('#Menu'+d).val(dataMenuArr[d]);
                      $('#Suuryou'+d).val(dataSuuryouArr[d]);
                      $('#shokujiid'+d).val(dataShokujiIDArr[d]);
                      dataMorningFlg="1";
                      for(m in shokujiMenuMorning) {
                        if(shokujiMenuMorning[m].id==$('#Menu'+d).val()) {
//                          $('#Shokushu'+d).val(shokujiMenuMorning[m].shurui);
//                          if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                            $('#Taishousha'+d).append('<option value="1">入居者:'+shokujiMenuMorning[m].nyukyosha_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="2">ゲスト１:'+shokujiMenuMorning[m].guest1_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="3">ゲスト２:'+shokujiMenuMorning[m].guest2_price+'円</option>');
//                          } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                            $('#Taishousha'+d).append('<option value="4">スタッフ:'+shokujiMenuMorning[m].staff_price+'円</option>');
//                          }
                        }
                      }
                      $('#Taishousha'+d).val(dataTaishoushaArr[d]);

                    } else if(dataShokujiArr[d]=="2") {
                      tsuikaLunch(d);
                      $('#Shokushu'+d).val(dataShokushuArr[d]);
                      setLunchMenu(d);
                      $('#Menu'+d).val(dataMenuArr[d]);
                      $('#Suuryou'+d).val(dataSuuryouArr[d]);
                      $('#shokujiid'+d).val(dataShokujiIDArr[d]);
                      dataLunchFlg="1";
                      for(m in shokujiMenuLunch) {
                        if(shokujiMenuLunch[m].id==$('#Menu'+d).val()) {
//                          $('#Shokushu'+d).val(shokujiMenuLunch[m].shurui);
//                          if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                            $('#Taishousha'+d).append('<option value="1">入居者:'+shokujiMenuLunch[m].nyukyosha_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="2">ゲスト１:'+shokujiMenuLunch[m].guest1_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="3">ゲスト２:'+shokujiMenuLunch[m].guest2_price+'円</option>');
//                          } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                            $('#Taishousha'+d).append('<option value="4">スタッフ:'+shokujiMenuLunch[m].staff_price+'円</option>');
//                          }
                        }
                      }
                      $('#Taishousha'+d).val(dataTaishoushaArr[d]);
                    } else if(dataShokujiArr[d]=="3") {
                      tsuikaDinner(d);
                      $('#Shokushu'+d).val(dataShokushuArr[d]);
                      setDinnerMenu(d);
                      $('#Menu'+d).val(dataMenuArr[d]);
                      $('#Suuryou'+d).val(dataSuuryouArr[d]);
                      $('#shokujiid'+d).val(dataShokujiIDArr[d]);
                      dataDinnerFlg="1";
                      for(m in shokujiMenuDinner) {
                        if(shokujiMenuDinner[m].id==$('#Menu'+d).val()) {
//                          $('#Shokushu'+d).val(shokujiMenuDinner[m].shurui);
//                          if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                            $('#Taishousha'+d).append('<option value="1">入居者:'+shokujiMenuDinner[m].nyukyosha_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="2">ゲスト１:'+shokujiMenuDinner[m].guest1_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="3">ゲスト２:'+shokujiMenuDinner[m].guest2_price+'円</option>');
//                          } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                            $('#Taishousha'+d).append('<option value="4">スタッフ:'+shokujiMenuDinner[m].staff_price+'円</option>');
//                          }
                        }
                      }
                      $('#Taishousha'+d).val(dataTaishoushaArr[d]);
                    } else if(dataShokujiArr[d]=="4") {
                      tsuikaBreak(d);
                      $('#Shokushu'+d).val(dataShokushuArr[d]);
                      setBreakMenu(d);
                      $('#Menu'+d).val(dataMenuArr[d]);
                      $('#Suuryou'+d).val(dataSuuryouArr[d]);
                      $('#shokujiid'+d).val(dataShokujiIDArr[d]);
                      dataBreakFlg="1";
                      for(m in shokujiMenuBreak) {
                        if(shokujiMenuBreak[m].id==$('#Menu'+d).val()) {
//                          $('#Shokushu'+d).val(shokujiMenuBreak[m].shurui);
//                          if($('#NyuuryokuMODE').val()=="NyuukyoshaNyuuryoku") {
                            $('#Taishousha'+d).append('<option value="1">入居者:'+shokujiMenuBreak[m].nyukyosha_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="2">ゲスト１:'+shokujiMenuBreak[m].guest1_price+'円</option>');
                            $('#Taishousha'+d).append('<option value="3">ゲスト２:'+shokujiMenuBreak[m].guest2_price+'円</option>');
//                          } else if($('#NyuuryokuMODE').val()=="StaffNyuuryoku") {
//                            $('#Taishousha'+d).append('<option value="4">スタッフ:'+shokujiMenuBreak[m].staff_price+'円</option>');
//                          }
                        }
                      }
                      $('#Taishousha'+d).val(dataTaishoushaArr[d]);
                    }
              }
           }

           var kesshokuCheck="0";
           var kesshokuShokujiM="";
           var kesshokuShokujiL="";
           var kesshokuShokujiD="";
           var kesshokuShokujiB="";
           if(dataKesshokuNengappiArr.length>0) {
             for(k in dataKesshokuNengappiArr) {
               if(dataKesshokuNengappiArr[k]==$('#TAISHOUBI').val()){
                 kesshokuCheck="1";
                 if(dataKesshokuShokujiArr[k]=="4"){
                    kesshokuShokujiB="1";
                 } else if (dataKesshokuShokujiArr[k]=="3") {
                    kesshokuShokujiD="1";
                 } else if (dataKesshokuShokujiArr[k]=="2") {
                    kesshokuShokujiL="1";
                 } else {
                    kesshokuShokujiM="1";
                 }
               }
             }
           }

           if(kesshokuCheck=="0"||kesshokuShokujiM=="") {
              tsuikaMorning(shokujiNum);
              setMorningMenu(shokujiNum);
              $('#shokujiid'+shokujiNum).val("@");
              shokujiNum++;
           }
           if(kesshokuCheck=="0"||kesshokuShokujiL=="") {
              tsuikaLunch(shokujiNum);
              setLunchMenu(shokujiNum);
              $('#shokujiid'+shokujiNum).val("@");
              shokujiNum++;
           }
           if(kesshokuCheck=="0"||kesshokuShokujiD=="") {
              tsuikaDinner(shokujiNum);
              setDinnerMenu(shokujiNum);
              $('#shokujiid'+shokujiNum).val("@");
              shokujiNum++;
           }
           if(kesshokuCheck=="0"||kesshokuShokujiB=="") {
              tsuikaBreak(shokujiNum);
              setBreakMenu(shokujiNum);
              $('#shokujiid'+shokujiNum).val("@");
              shokujiNum++;
           }

           $(".chkTaishoubi").each(function(){
               $(this).attr("checked",false);
           });
           $(".trListTaishoubi").each(function(){
               $(this).css('background-color','white');
           });
           $(".tdTaishoubi").each(function(){
               $(this).css('background-color','white');
           });
       });

       $("#print").click(function(){
          $("#MODE").attr({value:"print"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "printwindow",
                method: "post",
                action: "/E-LIFE/SHOKUJI/cgi-bin/SHOKUJI_JISSEKI_GEKKAN_NEW.CGI"
          });
                form.submit();
        });

       $("#search").click(function(){
          $("#MODE").attr({value:"search"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHOKUJI/cgi-bin/SHOKUJI_JISSEKI_GEKKAN_NEW.CGI"
          });
                form.submit();
        });

       $("#clear").click(function(){
          $("#MODE").attr({value:"init"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHOKUJI/cgi-bin/SHOKUJI_JISSEKI_GEKKAN_NEW.CGI"
          });
                form.submit();
        });

       $("#save").click(function(){
          var continueflg="0";
          if(kakuteiCheck=="0") {
              if(window.confirm('確定ボタンが押されていない可能性があります。このまま続けますか？')){
                 continueflg="0";
              } else {
                 continueflg="1";
              }
          }
          if(continueflg=="0") {
          $("#MODE").attr({value:"touroku"});
          $("#ARR_SHOKUJIID").val(dataShokujiIDArr);
          $("#ARR_NENGAPPI").val(dataNengappiArr);
          $("#ARR_Shokuji").val(dataShokujiArr);
          $("#ARR_Shokushu").val(dataShokushuArr);
          $("#ARR_Menu").val(dataMenuArr);
          $("#ARR_Taishousha").val(dataTaishoushaArr);
          $("#ARR_Suuryou").val(dataSuuryouArr);
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "/E-LIFE/SHOKUJI/cgi-bin/SHOKUJI_JISSEKI_GEKKAN_NEW.CGI"
          });
                form.submit();
          } else {
            $("button").each(function() {
              $(this).removeAttr("disabled");
            });
            return false;
          }
        });

       $("#morningTsuika").live('click',function(){
          var kesshokuCheck="0";
          if(dataKesshokuRiyoushaIDArr.length>0) {
            for(k in dataKesshokuRiyoushaIDArr) {
              if(dataKesshokuRiyoushaIDArr[k]==$('#RIYOUSHAID').val()){
                kesshokuCheck="1";
              }
            }
          }

          if(kesshokuCheck=="0") {
              if($('#RIYOUSHAID').val()!="") {
                 tsuikaMorning(shokujiNum);
                 setMorningMenu(shokujiNum);
                 $('#shokujiid'+shokujiNum).val("@");
                 shokujiNum++;
              } else {
                 tsuikaMorning(inputShokujiNum);
                 setMorningMenu(inputShokujiNum);
                 $('#shokujiid'+inputShokujiNum).val("@");
                 inputShokujiNum++;
              }
          }

        });

       $("#lunchTsuika").live('click',function(){
          var kesshokuCheck="0";
          if(dataKesshokuRiyoushaIDArr.length>0) {
            for(k in dataKesshokuRiyoushaIDArr) {
              if(dataKesshokuRiyoushaIDArr[k]==$('#RIYOUSHAID').val()){
                kesshokuCheck="1";
              }
            }
          }

          if(kesshokuCheck=="0") {
            if($('#RIYOUSHAID').val()!=""){
               tsuikaLunch(shokujiNum);
               setLunchMenu(shokujiNum);
               $('#shokujiid'+shokujiNum).val("@");
               shokujiNum++;
            } else {
               tsuikaLunch(inputShokujiNum);
               setLunchMenu(inputShokujiNum);
               $('#shokujiid'+inputShokujiNum).val("@");
               inputShokujiNum++;
            }
          }
        });

       $("#dinnerTsuika").live('click',function(){
          var kesshokuCheck="0";
          if(dataKesshokuRiyoushaIDArr.length>0) {
            for(k in dataKesshokuRiyoushaIDArr) {
              if(dataKesshokuRiyoushaIDArr[k]==$('#RIYOUSHAID').val()){
                kesshokuCheck="1";
              }
            }
          }

          if(kesshokuCheck=="0") {
            if($('#RIYOUSHAID').val()!=""){
               tsuikaDinner(shokujiNum);
               setDinnerMenu(shokujiNum);
               $('#shokujiid'+shokujiNum).val("@");
               shokujiNum++;
            } else {
               tsuikaDinner(inputShokujiNum);
               setDinnerMenu(inputShokujiNum);
               $('#shokujiid'+inputShokujiNum).val("@");
               inputShokujiNum++;
            }
          }
        });

       $("#breakTsuika").live('click',function(){
          var kesshokuCheck="0";
          if(dataKesshokuRiyoushaIDArr.length>0) {
            for(k in dataKesshokuRiyoushaIDArr) {
              if(dataKesshokuRiyoushaIDArr[k]==$('#RIYOUSHAID').val()){
                kesshokuCheck="1";
              }
            }
          }

          if(kesshokuCheck=="0") {
            if($('#RIYOUSHAID').val()!=""){
               tsuikaBreak(shokujiNum);
               setBreakMenu(shokujiNum);
               $('#shokujiid'+shokujiNum).val("@");
               shokujiNum++;
            } else {
               tsuikaBreak(inputShokujiNum);
               setBreakMenu(inputShokujiNum);
               $('#shokujiid'+inputShokujiNum).val("@");
               inputShokujiNum++;
            }
          }
        });

      $('#chkAllTaishoubi').live('click',function(){
        $('#TAISHOUBI').val('');
        $('.listTaishoubi').each(function(){
           $(this).css('background-color','white');
        });
        $('#MorningMenuNyuuryokuTbl').children().remove();
        $('#LunchMenuNyuuryokuTbl').children().remove();
        $('#DinnerMenuNyuuryokuTbl').children().remove();
        $('#BreakMenuNyuuryokuTbl').children().remove();
        inputShokujiNum=0;
        tsuikaMorning(inputShokujiNum);
        setMorningMenu(inputShokujiNum);
        $('#shokujiid'+inputShokujiNum).val("@");
        inputShokujiNum++;

        tsuikaLunch(inputShokujiNum);
        setLunchMenu(inputShokujiNum);
        $('#shokujiid'+inputShokujiNum).val("@");
        inputShokujiNum++;

        tsuikaDinner(inputShokujiNum);
        setDinnerMenu(inputShokujiNum);
        $('#shokujiid'+inputShokujiNum).val("@");
        inputShokujiNum++;

        tsuikaBreak(inputShokujiNum);
        setBreakMenu(inputShokujiNum);
        $('#shokujiid'+inputShokujiNum).val("@");
        inputShokujiNum++;



        $('.chkTaishoubi').each(function(){
          if($('#chkAllTaishoubi').prop('checked')) {
             $(this).attr('checked',true);
             setBg(this);
          } else {
             $(this).attr('checked',false);
             setBg(this);
          }
        });
      });

     $(document).on("change" ,"#Shisetsu" ,function(){
        var data = { GAMEN : "SHOKUJI_JISSEKI_GEKKAN" , MODE : "Shisetsu" ,Shisetsu : $("#shisetsu").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Tateya" ,function(){
        var data = { GAMEN : "SHOKUJI_JISSEKI_GEKKAN" , MODE : "Tateya" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Floor" ,function(){
        var data = { GAMEN : "SHOKUJI_JISSEKI_GEKKAN" , MODE : "Floor" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Unit" ,function(){
        var data = { GAMEN : "SHOKUJI_JISSEKI_GEKKAN" , MODE : "Unit" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val(), Unit : $("#Unit").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Kyoshitsu" ,function(){
        var data = { GAMEN : "SHOKUJI_JISSEKI_GEKKAN" , MODE : "Kyoshitsu" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val(), Unit : $("#Unit").val(),Kyoshitsu : $("#Kyoshitsu").val(), Nyuukyosha : $("#Nyuukyosha").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#TaishouYear" ,function(){
        var data = { GAMEN : "SHOKUJI_JISSEKI_GEKKAN" , MODE : "TaishouYear" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val(), Unit : $("#Unit").val(),Kyoshitsu : $("#Kyoshitsu").val(), Nyuukyosha : $("#Nyuukyosha").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#TaishouMonth" ,function(){
        var data = { GAMEN : "SHOKUJI_JISSEKI_GEKKAN" , MODE : "TaishouYear" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val(), Unit : $("#Unit").val(),Kyoshitsu : $("#Kyoshitsu").val(), Nyuukyosha : $("#Nyuukyosha").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val() ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Shokuji: $("#Shokuji").val() , Suuryou : $("#Suuryou").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_SHOKUJI_MENU_CHANGE.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShokujiMenuNyuuryokuTbl").html(response);
          }
       })

    });

     $(document).on("change" , "#Shokuji" ,function(){
        var val= $(this).val();
        var data = { GAMEN : "SHOKUJIPATTERN" , MODE : "SHOKUJIPATTERN" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Shokuji: $("#Shokuji").val() , Suuryou : $("#Suuryou").val(), TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val()};

       if(val!="9"){
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_SHOKUJI_MENU_CHANGE.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShokujiMenuNyuuryokuTbl").html(response);
          }
       })
   }
    });


     $(document).on("change" , "#Shokushu" ,function(){
        var data = { GAMEN : "SHOKUJIPATTERN" , MODE : "SHOKUJIPATTERN" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Shokuji: $("#Shokuji").val() ,  TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val() , Shokushu : $("#Shokushu").val() , Suuryou : $("#Suuryou").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_SHOKUJI_MENU_CHANGE.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShokujiMenuNyuuryokuTbl").html(response);
          }
       })

    });

     $(document).on("change" , "#Menu" ,function(){
        var data = { GAMEN : "SHOKUJIPATTERN" , MODE : "SHOKUJIPATTERN" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Shokuji: $("#Shokuji").val() , TaishouYear : $("#TaishouYear").val(), TaishouMonth : $("#TaishouMonth").val(), Shokushu : $("#Shokushu").val() , Menu : $("#Menu").val() , Kakaku : $("#Kakaku").val() , Suuryou : $("#Suuryou").val()};
       $.ajax({
             url:"/E-LIFE/SHOKUJI/cgi-bin/AJAX_SHOKUJI_MENU_CHANGE.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShokujiMenuNyuuryokuTbl").html(response);
          }
       })

    });

 });

    </script>

     <script type="text/javascript" language="Javascript">
      //<![CDATA[
        //エンターキーの無効化
        function keyBreak(){
        if(window.event.keyCode=="13"){
        event.returnValue = false;
         }
        }
      //]]>

function sakujyo_select(str){
  var doc = document.KENSAKU_FORM.nyuuryoku_shokuji
  var a = document.getElementsByClassName("a");
  var b = document.getElementsByClassName("b");
  var c = document.getElementsByClassName("c");
  var d = document.getElementsByClassName("d");

  var Asa = document.getElementById("HeaderAsa");
  var Hiru = document.getElementById("HeaderHiru");
  var Yoru = document.getElementById("HeaderYoru");
  var Oyatsu = document.getElementById("HeaderOyatsu");

  if(str == "9") {
   Asa.className    = "td-success";         //朝食ヘッダー
   Hiru.className   = "td-success";     //昼食ヘッダー
   Yoru.className   = "td-success";     //夕食ヘッダー
   Oyatsu.className = "td-success";   //おやつヘッダー
   document.KENSAKU_FORM.Shokushu.disabled = true;  //食種無効
   document.KENSAKU_FORM.Menu.disabled = true;  //メニュー無効
   document.KENSAKU_FORM.Taishousha.disabled = true;  //対象者無効
   document.KENSAKU_FORM.Suuryou.disabled = true;  //数量無効
   document.KENSAKU_FORM.tsuika.disabled = true;  //追加ボタン無効
//} else {
//   document.KENSAKU_FORM.Shokushu.disabled = false;  //食種無効
//   document.KENSAKU_FORM.Menu.disabled = false;  //メニュー無効
//   document.KENSAKU_FORM.Suuryou.disabled = false;  //数量無効
//   document.KENSAKU_FORM.tsuika.disabled = false;  //数量無効
//}
   document.KENSAKU_FORM.a_all_chk_box.disabled = false; //チェックボックスall有効
   for(var i=0;i<a.length;i++){
   a[i].disabled = false;
   };  //aチェックボックス有効
   document.KENSAKU_FORM.b_all_chk_box.disabled = false; //bチェックボックスall有効
   for(var i=0;i<b.length;i++){
   b[i].disabled = false;
   };  //aチェックボックス無効
  document.KENSAKU_FORM.c_all_chk_box.disabled = false; //cチェックボックスall有効
   for(var i=0;i<c.length;i++){
   c[i].disabled = false;
   };  //aチェックボックス無効
   document.KENSAKU_FORM.d_all_chk_box.disabled = false; //dチェックボックスall有効
   for(var i=0;i<d.length;i++){
   d[i].disabled = false;
   };  //aチェックボックス無効
 } else if (str == "1") {
   Asa.className = "th-select";          //朝食ヘッダー
   Hiru.className = "th-notselect";     //昼食ヘッダー
   Yoru.className = "th-notselect";     //夕食ヘッダー
   Oyatsu.className = "th-notselect";   //おやつヘッダー
   document.KENSAKU_FORM.Shokushu.disabled = false;  //食種有効
   document.KENSAKU_FORM.Menu.disabled = false;  //メニュー有効
   document.KENSAKU_FORM.Taishousha.disabled = false;  //対象者有効
   document.KENSAKU_FORM.Suuryou.disabled = false;  //数量有効
   document.KENSAKU_FORM.tsuika.disabled = false;  //追加ボタン
   document.KENSAKU_FORM.a_all_chk_box.disabled = false; //aチェックボックスall有効
   for(var i=0;i<a.length;i++){
   a[i].disabled = false;
   };  //aチェックボックス有効
//   a[i].checked = false;
   document.KENSAKU_FORM.b_all_chk_box.disabled = true; //bチェックボックスall無効
   document.KENSAKU_FORM.b_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<b.length;i++){
   b[i].disabled = true;
   b[i].checked = false;
   setBg(b[i]);
   };  //bチェックボックス無効
  document.KENSAKU_FORM.c_all_chk_box.disabled = true; //cチェックボックスall無効
   document.KENSAKU_FORM.c_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<c.length;i++){
   c[i].disabled = true;
   c[i].checked = false;
   setBg(c[i]);
   };  //cチェックボックス無効
   document.KENSAKU_FORM.d_all_chk_box.disabled = true; //dチェックボックスall無効
   document.KENSAKU_FORM.d_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<d.length;i++){
   d[i].disabled = true;
   d[i].checked = false;
   setBg(d[i]);
   };  //dチェックボックス無効
 }else if (str == "2") {
   Asa.className = "th-notselect";          //朝食ヘッダー
   Hiru.className = "th-select";     //昼食ヘッダー
   Yoru.className = "th-notselect";     //夕食ヘッダー
   Oyatsu.className = "th-notselect";   //おやつヘッダー
   document.KENSAKU_FORM.Shokushu.disabled = false;  //食種有効
   document.KENSAKU_FORM.Menu.disabled = false;  //メニュー有効
   document.KENSAKU_FORM.Taishousha.disabled = false;  //対象者有効
   document.KENSAKU_FORM.Suuryou.disabled = false;  //数量有効
   document.KENSAKU_FORM.tsuika.disabled = false;  //追加ボタン
//   for(var i=0;i<KENSAKU_FORM.checkgyou.length;i++){
//   document.KENSAKU_FORM.checkgyou[i].disabled = true;
//   };  //チェックボックス無効
  document.KENSAKU_FORM.a_all_chk_box.disabled = true; //aチェックボックスall無効
   document.KENSAKU_FORM.a_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<a.length;i++){
   a[i].disabled = true;
   a[i].checked = false;
   setBg(a[i]);
   };  //aチェックボックス無効
   document.KENSAKU_FORM.b_all_chk_box.disabled = false; //bチェックボックスall有効
   for(var i=0;i<b.length;i++){
   b[i].disabled = false;
   };  //aチェックボックス有効
  document.KENSAKU_FORM.c_all_chk_box.disabled = true; //cチェックボックスall無効
  document.KENSAKU_FORM.c_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<c.length;i++){
   c[i].disabled = true;
   c[i].checked = false;
   setBg(c[i]);
   };  //aチェックボックス無効
   document.KENSAKU_FORM.d_all_chk_box.disabled = true; //dチェックボックスall無効
   document.KENSAKU_FORM.d_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<d.length;i++){
   d[i].disabled = true;
   d[i].checked = false;
   setBg(d[i]);
   };  //aチェックボックス無効
 }else if (str == "3") {
   Asa.className = "th-notselect";          //朝食ヘッダー
   Hiru.className = "th-notselect";     //昼食ヘッダー
   Yoru.className = "th-select";     //夕食ヘッダー
   Oyatsu.className = "th-notselect";   //おやつヘッダー
   document.KENSAKU_FORM.Shokushu.disabled = false;  //食種有効
   document.KENSAKU_FORM.Menu.disabled = false;  //メニュー有効
   document.KENSAKU_FORM.Suuryou.disabled = false;  //数量有効
   document.KENSAKU_FORM.Taishousha.disabled = false;  //対象者有効
   document.KENSAKU_FORM.tsuika.disabled = false;  //追加ボタン
  document.KENSAKU_FORM.a_all_chk_box.disabled = true; //aチェックボックスall無効
   document.KENSAKU_FORM.a_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<a.length;i++){
   a[i].disabled = true;
   a[i].checked = false;
   setBg(a[i]);
   };  //aチェックボックス無効
   document.KENSAKU_FORM.b_all_chk_box.disabled = true; //bチェックボックスall無効
   document.KENSAKU_FORM.b_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<b.length;i++){
   b[i].disabled = true;
   b[i].checked = false;
   setBg(b[i]);
   };  //bチェックボックス無効
  document.KENSAKU_FORM.c_all_chk_box.disabled = false; //cチェックボックスall有効
   for(var i=0;i<c.length;i++){
   c[i].disabled = false;
   };  //cチェックボックス有効
   document.KENSAKU_FORM.d_all_chk_box.disabled = true; //dチェックボックスall無効
   document.KENSAKU_FORM.d_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<d.length;i++){
   d[i].disabled = true;
   d[i].checked = false;
   setBg(d[i]);
   };  //dチェックボックス無効
 }else if (str == "4") {
   Asa.className = "th-notselect";          //朝食ヘッダー
   Hiru.className = "th-notselect";     //昼食ヘッダー
   Yoru.className = "th-notselect";     //夕食ヘッダー
   Oyatsu.className = "th-select";   //おやつヘッダー
   document.KENSAKU_FORM.Shokushu.disabled = false;  //食種有効
   document.KENSAKU_FORM.Menu.disabled = false;  //メニュー有効
   document.KENSAKU_FORM.Taishousha.disabled = false;  //対象者有効
   document.KENSAKU_FORM.Suuryou.disabled = false;  //数量有効
   document.KENSAKU_FORM.tsuika.disabled = false;  //追加ボタン
  document.KENSAKU_FORM.a_all_chk_box.disabled = true; //aチェックボックスall無効
   document.KENSAKU_FORM.a_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<a.length;i++){
   a[i].disabled = true;
   a[i].checked = false;
   setBg(a[i]);
   };  //aチェックボックス無効
   document.KENSAKU_FORM.b_all_chk_box.disabled = true; //bチェックボックスall無効
   document.KENSAKU_FORM.b_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<b.length;i++){
   b[i].disabled = true;
   b[i].checked = false;
   setBg(b[i]);
   };  //bチェックボックス無効
  document.KENSAKU_FORM.c_all_chk_box.disabled = true; //cチェックボックスall無効
   document.KENSAKU_FORM.c_all_chk_box.checked = false; //bチェックボックスall無効
   for(var i=0;i<c.length;i++){
   c[i].disabled = true;
   c[i].checked = false;
   setBg(c[i]);
   };  //cチェックボックス無効
   document.KENSAKU_FORM.d_all_chk_box.disabled = false; //dチェックボックスall有効
   for(var i=0;i<d.length;i++){
   d[i].disabled = false;
   };  //dチェックボックス有効
}
}


      function chkbox_chk(chk_obj) {
        chk_obj.checked = true;
        setBg(chk_obj);
      }
      function all_check(chk) {
        var Chkbox = document.getElementsByClassName(chk);
       var ElementsCount = Chkbox.length; // チェックボックスの数
        if(document.KENSAKU_FORM.all_chk_box.checked == true){
          tf_flg=true;
        } else {
          tf_flg=false;
        }
        for( i=0 ; i<ElementsCount ; i++ ) {
          Chkbox[i].checked = tf_flg;//ONOFFの切り替え 
          setBg(Chkbox[i]);
        }
      }

      function a_all_check(chk) {
        var Chkbox = document.getElementsByClassName(chk);
        var ElementsCount = Chkbox.length; // チェックボックスの数
        if(document.KENSAKU_FORM.a_all_chk_box.checked == true){
          tf_flg=true;
        } else {
          tf_flg=false;
        }
        for( i=0 ; i<ElementsCount ; i++ ) {
          Chkbox[i].checked = tf_flg;//ONOFFの切り替え 
          setBg(Chkbox[i]);
        }
      }

      function b_all_check(chk) {
        var Chkbox = document.getElementsByClassName(chk);
        var ElementsCount = Chkbox.length; // チェックボックスの数
        if(document.KENSAKU_FORM.b_all_chk_box.checked == true){
          tf_flg=true;
        } else {
          tf_flg=false;
        }
        for( i=0 ; i<ElementsCount ; i++ ) {
          Chkbox[i].checked = tf_flg;//ONOFFの切り替え 
          setBg(Chkbox[i]);
        }
      }

      function c_all_check(chk) {
        var Chkbox = document.getElementsByClassName(chk);
        var ElementsCount = Chkbox.length; // チェックボックスの数
        if(document.KENSAKU_FORM.c_all_chk_box.checked == true){
          tf_flg=true;
        } else {
          tf_flg=false;
        }
        for( i=0 ; i<ElementsCount ; i++ ) {
          Chkbox[i].checked = tf_flg;//ONOFFの切り替え 
          setBg(Chkbox[i]);
        }
      }

      function d_all_check(chk) {
        var Chkbox = document.getElementsByClassName(chk);
        var ElementsCount = Chkbox.length; // チェックボックスの数
        if(document.KENSAKU_FORM.d_all_chk_box.checked == true){
          tf_flg=true;
        } else {
          tf_flg=false;
        }
        for( i=0 ; i<ElementsCount ; i++ ) {
          Chkbox[i].checked = tf_flg;//ONOFFの切り替え 
          setBg(Chkbox[i]);
        }
      }

      function e_all_check(chk) {
        var Chkbox = document.getElementsByClassName(chk);
        var ElementsCount = Chkbox.length; // チェックボックスの数
        if(document.KENSAKU_FORM.e_all_chk_box.checked == true){
          tf_flg=true;
        } else {
          tf_flg=false;
        }
        for( i=0 ; i<ElementsCount ; i++ ) {
          Chkbox[i].checked = tf_flg;//ONOFFの切り替え 
          setBg(Chkbox[i]);
        }
      }

      function setBg(rd) {
        if(rd.checked){
            var rdd=rd.parentNode;
            rd.parentNode.style.backgroundColor="#ffcccc";
            rdd.parentNode.style.backgroundColor="#ffcccc";
        }
        else{
            var rdd=rd.parentNode;
            rd.parentNode.style.backgroundColor="white";
            setNameBg(rd);
        }
}

      function setNameBg(cd) {
          num = 0;      //ﾁｪｯｸされている項目数
          chkvalue = "";        //ﾁｪｯｸされている項目値
          var cdd = cd.parentNode.getAttribute("NAME");
          var ccd = cd.parentNode;

              var chkObj = document.getElementsByClassName(cdd);
              var chkList = chkObj.length;
             for(var i=0; i<chkObj.length; i++){
               if (chkObj[i].checked) {
                num++;
                };
            }
//          for(var i=0; i<checkList.length; i++){
//              var chkObj = document.getElementById(checkList[i]);
//               var chkObjA = document.KENSAKU_FORM.A.checked;
//               var chkObjB = document.KENSAKU_FORM.B.checked;
//               var chkObjC = document.KENSAKU_FORM.C.checked;
//               var chkObjD = document.KENSAKU_FORM.D.checked;

// alert(checkObjA);
          //  }
          if(num == 0){ccd.parentNode.style.backgroundColor="white"};

          }
    </script>


    <style type="text/css">
        #line-chart {
            height:300px;
            width:800px;
            margin: 0px auto;
            margin-top: 1em

        }
        .th-select {
  background-color: hsl(0, 52%, 36%) !important;
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#c44444", endColorstr="#8b2c2c");
  background-image: -khtml-gradient(linear, left top, left bottom, from(#c44444), to(#8b2c2c));
  background-image: -moz-linear-gradient(top, #c44444, #8b2c2c);
  background-image: -ms-linear-gradient(top, #c44444, #8b2c2c);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #c44444), color-stop(100%, #8b2c2c));
  background-image: -webkit-linear-gradient(top, #c44444, #8b2c2c);
  background-image: -o-linear-gradient(top, #c44444, #8b2c2c);
  background-image: linear-gradient(#c44444, #8b2c2c);
  border-color: #8b2c2c #8b2c2c hsl(0, 52%, 32%);
  color: #fff !important;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.26);
  -webkit-font-smoothing: antialiased;
}

   .th-notselect {
  background-color: #A5B6B5;
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#869b99), to(#A5B6B5));
  background-image: -webkit-linear-gradient(top, #869b99, #A5B6B5);
  background-image: -o-linear-gradient(top, #869b99, #A5B6B5);
  background-image: linear-gradient(to bottom, #869b99, #A5B6B5);
  background-image: -moz-linear-gradient(top, #869b99, #A5B6B5);
  filter: progid:dximagetransform.microsoft.gradient(startColorStr='#6c7994', EndColorStr='#414959');
  -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr='#869b99',EndColorStr='#A5B6B5')";
  border: 1px solid #495857;
  white-space:nowrap;
  color:#ffffff;
}

    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="lib/html5.js"></script>
    <![endif]-->

  </head>
