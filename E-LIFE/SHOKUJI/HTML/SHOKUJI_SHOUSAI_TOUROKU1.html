<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <title>食事詳細・パターンマスタ</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css">

    <link rel="stylesheet" type="text/css" href="/css/theme.css">
    <link rel="stylesheet" href="/css/font.css">
    <link href='/css/fullcalendar.css' rel='stylesheet' />
    <link href='/css/fullcalendar.print.css' rel='stylesheet' media='print' />
    <link rel="stylesheet" href="/css/jquery-ui.css" />
    <script src='/js/jquery-1.9.1.min.js'></script>
    <script src='/js/jquery-ui-1.10.2.custom.min.js'></script>
    <script src="/js/jquery-ui.js"></script>
    <script src='/js/fullcalendar.js'></script>
    <script src="/js/jquery.ui.datepicker-ja.js"></script>
    <script>

	$(document).ready(function() {

       $("#shokuji_pattern").click(function(){
          $("#MODE").attr({value:"init"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "SHOKUJI_PATTERN_TOUROKU.CGI"
          });
                form.submit();
        });

       $("#RirekiNengetsuhi").change(function(){
          $("#MODE").attr({value:"search"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "SHOKUJI_SHOUSAI_TOUROKU.CGI"
          });
                form.submit();
        });


       $("#sakujyo").click(function(){
          DoAlert = confirm('データを削除します。よろしいですか？');
         if (DoAlert == true){
//          $('[name="sakujyocheck"]:checked').each(function(){
//             delete.push($(this).val());
//            });
          $("#MODE").attr({value:"sakujyo"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "SHOKUJI_SHOUSAI_TOUROKU.CGI"
          });
                form.submit();
          }else{ return false;
          }
        });
        
       $("#search").click(function(){
          $("#shinki").attr({value:""});
          $("#henkou").attr({value:""});
          $("#genkou_rireki").attr({value:""});
          $("#MODE").attr({value:"search"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "SHOKUJI_SHOUSAI_TOUROKU.CGI"
          });
                form.submit();
        });

       $("#excel_out").click(function(){
          $("#MODE").attr({value:"excel_out"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "hidden_frame",
                method: "post",
                action: "SHOKUJI_SHOUSAI_TOUROKU.CGI"
          });
                form.submit();
        });

       $("#clear").click(function(){
          $("#MODE").attr({value:"init"});
          $("#SHOKUJISHOUSAIID").attr({value:""});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "SHOKUJI_SHOUSAI_TOUROKU.CGI"
          });
                form.submit();
        });

       $("#shinkitouroku").click(function(){
          $("#MODE").attr({value:"shinki"});
          $("#SHOKUJISHOUSAIID").attr({value:""});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "SHOKUJI_SHOUSAI_TOUROKU.CGI"
          });
                form.submit();
        });


       $("#touroku").click(function(){
          $("#MODE").attr({value:"touroku"});
          var form = $("#KENSAKU_FORM");
          form.attr({
                target: "_top",
                method: "post",
                action: "SHOKUJI_SHOUSAI_TOUROKU.CGI"
          });
                form.submit();
        });

		$.datepicker.setDefaults({
			changeYear:true,
			changeMonth:true,
			yearRange:"c-130:c+1",
			dateFormat: 'yy/mm/dd',
			yearSuffix: ''
        });

     $(document).on("change" ,"#Shisetsu" ,function(){
        var data = { GAMEN : "SHOKUJISHOUSAI" , MODE : "Shisetsu" ,Shisetsu : $("#shisetsu").val()};
       $.ajax({
             url:"AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Tateya" ,function(){
        var data = { GAMEN : "SHOKUJISHOUSAI" , MODE : "Tateya" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val()};
       $.ajax({
             url:"AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Floor" ,function(){
        var data = { GAMEN : "SHOKUJISHOUSAI" , MODE : "Floor" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val()};
       $.ajax({
             url:"AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Unit" ,function(){
        var data = { GAMEN : "SHOKUJISHOUSAI" , MODE : "Unit" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val(), Unit : $("#Unit").val()};
       $.ajax({
             url:"AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });

     $(document).on("change" , "#Kyoshitsu" ,function(){
        var data = { GAMEN : "SHOKUJISHOUSAI" , MODE : "Kyoshitsu" ,Shisetsu : $("#shisetsu").val(), Tateya : $("#Tateya").val(), Floor: $("#Floor").val(), Unit : $("#Unit").val(),Kyoshitsu : $("#Kyoshitsu").val()};
       $.ajax({
             url:"AJAX_RIYOUSHA_SHOKUJI.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShisetsuSelectTr").html(response);
          }
       })

    });


       $(".shokuji_gyo,.shokuji_gyo_old").click(function(){
          var data ={ MODE : "Menu" , SHOKUJIMENUID : $(this).attr("id") , Shisetsu : $("#SHISETSUID").val() , Tateya : $("#Tateya").val() };
       $.ajax({
             url:"AJAX_SHOKUJI_MENU_CHANGE.CGI",
             type:"POST",
             data:data,
             success:function(response){
              $("#ShokujiMenuShousai").html(response);
		$(function(){
			$("#KikanFrom").datepicker();
			$("#KikanTo").datepicker();
            });
          }
       })
    });
		$(function(){
			$("#KikanFrom").datepicker();
			$("#KikanTo").datepicker();
			$("#ShinkiKikanFrom").datepicker();
			$("#ShinkiKikanTo").datepicker();
            });

$(function(){
    $("#henkou").click(function(){
        $("#KikanFrom").css("background","lightyellow");
        $("#KikanTo").css("background","lightyellow");
        $("#ShinkiKikanFrom").css("background","lightyellow");
        $("#ShinkiKikanTo").css("background","lightyellow");
        });
});
$(function(){
    $("#genkou_rireki").click(function(){
        $("#KikanFrom").css("background","");
        $("#KikanTo").css("background","");
        $("#ShinkiKikanFrom").css("background","");
        $("#ShinkiKikanTo").css("background","");
    });
});
$(function(){
    $("#shinki").click(function(){
        $("#KikanFrom").css("background","lightyellow");
        $("#KikanTo").css("background","lightyellow");
        $("#ShinkiKikanFrom").css("background","lightyellow");
        $("#ShinkiKikanTo").css("background","lightyellow");
        });
});

});
    </script>

     <script type="text/javascript" language="Javascript">

function rdChange(){
   radio = document.getElementsByName('EtsuranHenkou') 

   if(radio[1].checked) {
    //変更
    document.getElementById('KizonNyuuryoku').style.display = ""; //既存
    document.getElementById('ShinkiNyuuryoku').style.display = "none"; //新規
    document.getElementById('RirekiNengetsuhi').style.display = ""; //変更日無効
    document.KENSAKU_FORM.KikanFrom.disabled = false;  //期間From有効
    document.KENSAKU_FORM.KikanTo.disabled = false;  //期間To有効
    document.KENSAKU_FORM.Shushoku.disabled = false;  //主食有効
    document.KENSAKU_FORM.Fukushoku.disabled = false;  //副食有効
    document.KENSAKU_FORM.shijishoku_c1.disabled = false;  //糖尿病有効
    document.KENSAKU_FORM.shijishoku_t1.disabled = false;  //糖尿病有効
    document.KENSAKU_FORM.shijishoku_c2.disabled = false;  //減塩食有効
    document.KENSAKU_FORM.shijishoku_t2.disabled = false;  //減塩食有効
    document.KENSAKU_FORM.shijishoku_c3.disabled = false;  //肝臓食有効
    document.KENSAKU_FORM.shijishoku_t3.disabled = false;  //肝臓食有効
    document.KENSAKU_FORM.shijishoku_t33.disabled = false;  //肝臓食有効
    document.KENSAKU_FORM.Allergy.disabled = false;  //食事アレルギー有効
    document.KENSAKU_FORM.Kinshishoku.disabled = false;  //禁止食有効
    document.KENSAKU_FORM.Sonota.disabled = false;  //その他有効
    document.getElementById('KikanFrom').style.backgroundColor = 'lightyellow'; 
    document.getElementById('KikanTo').style.backgroundColor = 'lightyellow'; 
    document.getElementById('nengetsuhi_open').style.display = "";
    document.getElementById('touroku').style.display = "";
    document.getElementById('shinkitouroku').style.display = "none";
    document.getElementById('sakujyo').style.display = "";

  }else if(radio[0].checked) {
    //現行・履歴
    document.getElementById('KizonNyuuryoku').style.display = ""; //既存
    document.getElementById('ShinkiNyuuryoku').style.display = "none"; //新規
    document.getElementById('RirekiNengetsuhi').style.display = "";  //変更日選択有効
    document.KENSAKU_FORM.KikanFrom.disabled = true;  //期間From無効
    document.KENSAKU_FORM.KikanTo.disabled = true;  //期間To有効
    document.KENSAKU_FORM.Shushoku.disabled = true;  //主食無効
    document.KENSAKU_FORM.Fukushoku.disabled = true;  //副食無効
    document.KENSAKU_FORM.shijishoku_c1.disabled = true;  //糖尿病無効
    document.KENSAKU_FORM.shijishoku_t1.disabled = true;  //糖尿病無効
    document.KENSAKU_FORM.shijishoku_c2.disabled = true;  //減塩食無効
    document.KENSAKU_FORM.shijishoku_t2.disabled = true;  //減塩食無効
    document.KENSAKU_FORM.shijishoku_c3.disabled = true;  //肝臓食無効
    document.KENSAKU_FORM.shijishoku_t3.disabled = true;  //肝臓食無効
    document.KENSAKU_FORM.shijishoku_t33.disabled = true;  //肝臓食無効
    document.KENSAKU_FORM.Allergy.disabled = true;  //食事アレルギー無効
    document.KENSAKU_FORM.Kinshishoku.disabled = true;  //禁止食無効
    document.KENSAKU_FORM.Sonota.disabled = true;  //その他無効
    document.getElementById('nengetsuhi_open').style.display = "";
    document.getElementById('touroku').style.display = "none";
    document.getElementById('shinkitouroku').style.display = "none";
    document.getElementById('sakujyo').style.display = "none";

}else if(radio[2].checked) {
    //新規
    document.getElementById('KizonNyuuryoku').style.display = "none"; //既存
    document.getElementById('ShinkiNyuuryoku').style.display = ""; //新規
    document.getElementById('RirekiNengetsuhi').style.display = "none"; //変更日無効
    document.KENSAKU_FORM.ShinkiKikanFrom.disabled = false;  //期間From有効
    document.KENSAKU_FORM.ShinkiKikanTo.disabled = false;  //期間To有効
    document.KENSAKU_FORM.ShinkiShushoku.disabled = false;  //主食有効
    document.KENSAKU_FORM.ShinkiFukushoku.disabled = false;  //副食有効
    document.KENSAKU_FORM.Shinkishijishoku_c1.disabled = false;  //糖尿病有効
    document.KENSAKU_FORM.Shinkishijishoku_t1.disabled = false;  //糖尿病有効
    document.KENSAKU_FORM.Shinkishijishoku_c2.disabled = false;  //減塩食有効
    document.KENSAKU_FORM.Shinkishijishoku_t2.disabled = false;  //減塩食有効
    document.KENSAKU_FORM.Shinkishijishoku_c3.disabled = false;  //肝臓食有効
    document.KENSAKU_FORM.Shinkishijishoku_t3.disabled = false;  //肝臓食有効
    document.KENSAKU_FORM.Shinkishijishoku_t33.disabled = false;  //肝臓食有効
    document.KENSAKU_FORM.ShinkiAllergy.disabled = false;  //食事アレルギー有効
    document.KENSAKU_FORM.ShinkiKinshishoku.disabled = false;  //禁止食有効
    document.KENSAKU_FORM.ShinkiSonota.disabled = false;  //その他有効
    document.getElementById('ShinkiKikanFrom').style.backgroundColor = 'lightyellow';
    document.getElementById('ShinkiKikanTo').style.backgroundColor = 'lightyellow';
    document.getElementById('nengetsuhi_open').style.display = "none";
    document.getElementById('touroku').style.display = "none";
    document.getElementById('shinkitouroku').style.display = "";
    document.getElementById('sakujyo').style.display = "none";
}

}
 //オンロードさせ、リロード時に選択を保持
window.onload = rdChange;


function chk(){
  if (document.KENSAKU_FORM.shijishoku_c1.checked){　//checked チェックが入っていたら
      document.KENSAKU_FORM.shijishoku_t1.disabled = false; // 入力不可, 無効化
            }
  else{
 document.KENSAKU_FORM.shijishoku_t1.disabled = true; // 入力可能,有効化
       }
  if (document.KENSAKU_FORM.shijishoku_c2.checked){　//checked チェックが入っていたら
      document.KENSAKU_FORM.shijishoku_t2.disabled = false; // 入力不可, 無効化
            }
  else{
 document.KENSAKU_FORM.shijishoku_t2.disabled = true; // 入力可能,有効化
       }

  if (document.KENSAKU_FORM.shijishoku_c3.checked){　//checked チェックが入っていたら
      document.KENSAKU_FORM.shijishoku_t3.disabled = false; // 入力不可, 無効化
      document.KENSAKU_FORM.shijishoku_t33.disabled = false; //
            }
  else{
 document.KENSAKU_FORM.shijishoku_t3.disabled = true; // 入力可能,有効化
 document.KENSAKU_FORM.shijishoku_t33.disabled = true; //
       }
   }

      //<![CDATA[
        //エンターキーの無効化
        function keyBreak(){
        if(window.event.keyCode=="13"){
        event.returnValue = false;
         }
        }
      //]]>


    </script>

    <style type="text/css">
        #line-chart {
            height:300px;
            width:800px;
            margin: 0px auto;
            margin-top: 1em
        }
       .shokuji_gyo {
    background-color:white;
       }

       .shokuji_gyo_old {
    background-color:#dddddd;
       }

    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="lib/html5.js"></script>
    <![endif]-->

  </head>
